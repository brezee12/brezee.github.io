(function(){var t={L_microsoftcopyright_text:"© {year} Microsoft Corporation",L_DistanceUnitKm_Text:"km",L_DistanceUnitMeters_Text:"m",L_DistanceUnitMilesShortText_Text:"mi",L_DistanceUnitMilesLongText_Text:"miles",L_DistanceUnitFeetShort_Text:"ft",L_Distance_Format:"{0} {1}",L_LatLon_Format:"{0}, {1}",L_Duration:"{0} hr {1} min",L_Duration_NoMin:"{0} hr",L_Duration_Min:"{0} min",L_DistanceUnitFeetSquareShort_Text:"sq ft",L_DistanceUnitKmSquare_Text:"sq km",L_DistanceUnitMetersSquare_Text:"sq m",L_DistanceUnitMilesSquareShortText_Text:"sq mi",L_AreaFieldString:"Area",L_FormatFieldString:"{0}: {1}",L_IncorrectValue_text:"N/A",L_LengthFieldString:"Length",L_FocusDivDefaultLabel:"Bing Maps - Interact to see more",L_Compass_Left:"Rotate Left",L_Compass_Reset:"Reset to Default Rotation",L_Compass_Right:"Rotate Right",L_Pitch_Decrease:"Decrease Pitch",L_Pitch_Increase:"Increase Pitch",L_Pitch_Reset:"Reset to Default Pitch",L_Style_Select:"Select Style",L_ZoomIn:"Zoom In",L_ZoomOut:"Zoom Out",L_Style_Birdseye:"Bird's eye",L_Style_DarkCanvas:"Dark Canvas",L_Style_DarkRoad:"Dark Road",L_Style_Grayscale:"Grayscale",L_Style_Hybrid:"Hybrid",L_Style_LightCanvas:"Light Canvas",L_Style_Road:"Road",L_Style_Streetside:"Streetside",L_Style_OS:"Ordnance Survey",L_LocateMe_Text:"Locate me",L_LocateMe_Error_Text_Approximate_Location:"We could not retrieve your exact location, but think you may be in this area.",L_LocateMe_Error_Text_Setting:"We could not retrieve your exact location. This is your default location setting.",L_LocateMe_ChangeSettings_Text:"Manually change my location setting",L_GeochainTitle_Text:"Expand/Collapse Geochain",L_Landmark3D_Flyout_Text_Format:"View {name} in 3D",L_LandmarkDealsMore_Text:"+ {0} more",L_MapBuilder_Button_Text:"Edit Maps",L_3DLandmark_Copy_Button_Text:"Copy",L_3DLandmark_Copy_Link_Success:"Successfully copied.",L_3DLandmark_Feedback_Button_Tooltip:"Feedback",L_3DLandmark_Share_Button_Tooltip:"Share",L_3DLandmark_Feedback_Button_Aria_Label:"Give feedback for 3D landmarks",L_3DLandmark_Share_Button_Aria_Label:"Share 3D landmark",L_3DLandmark_Share_Panel_Close:"Close",L_3DLandmark_Flyover_Video:"City Flyover",L_3DLandmark_Flyover_Render:"3D Flyover",L_WebGLError_Disabled:'WebGL has been disabled by your organization. Please contact your IT team for support, and ensure your brower is not started with the commandline parameter "-disable-webgl" when using Chrome.',L_WebGLError_Generic:"Failed to create map due to a WebGL error. Please try closing and reopening all browser windows. If the issue persists, please check WebGL support by following the link: {0}",L_DropDownMenuLabelToggleButtonToolTip_Text:"Labels",L_Details:"Details",L_DetailsTooltip:"Toggle additional details on the map such as landmarks and business labels",L_Style_Satellite:"Satellite",L_No_BE_Images:"No Bird's eye images in this region",L_No_SS_Images:"No Streetside images in this region"},n=window.$MicrosoftMaps8,i;n.ResourceManager?n.ResourceManager.init("MapCore",t):(i=n.ResourcesObject=n.ResourcesObject||{},i.MapCore=t)})(),function(){var pt,f,ot,wt,g,v,ht,bt,ct,ui,w,rt,y,ei,at;try{var i=Microsoft.Maps,o=i.Internal,s=o.__assign,c=o.__extends,ft=o.__spreadArray,n=i.globalConfig,r=o.coreConfig,e=n.features,ur=e.advertising,fr=e.autosuggest,er=e.calendar,or=e.collections,sr=e.directions,hr=e.feedback,cr=e.flyover,lr=e.landmarks3D,ar=e.map3D,vr=e.richMapsInfobox,yr=e.labels,pr=e.layerManager,wr=e.localGuide,br=e.localSearch,kr=e.mapBuilder,tt=e.mapDelay,dr=e.optIn,gr=e.print,nu=e.sharing,tu=e.streetside,iu=e.taskBar,ru=e.taskFramework,uu=e.trafficControl,fu=e.traffic,eu=e.trafficExperiences,ou=e.mapBuilderExperiences,su=e.transit,hu=e.travel,cu=e.xsr,li=o.dependencyResolver,et=o.ExternalPromise,yt=o.LocalStorageCache,rt=o.MapMath,a=o.TimeoutWrapper,lu=o.VectorMath,t=i.ResourcesObject.MapCore;o.originalXMLHttpRequest=typeof Sarissa!="undefined"&&Sarissa.originalXMLHttpRequest?Sarissa.originalXMLHttpRequest:window.XMLHttpRequest;pt=function(f){function e(t,o){var h=this,y=e._getDefaultServiceOptions(o||{}),c,a;o=o||{view:"Auto"};o.styleSet||(o.style=u.getAzureMapStyleFromMapType(u.getMapTypeFromMapStyle(o.style)));o.showFeedbackLink=!1;o.showBuildingModels=!0;o.minZoom=o.minZoom||r.basemapDataMinZoom;o.maxZoom=o.maxZoom||u.convertZoom(r.basemapDataMaxZoom,1);o.wheelZoomRate=o.wheelZoomRate||e.defaultWheelZoomRate;typeof o.dragRotateInteraction!="boolean"&&(o.dragRotateInteraction=!1);n.isMapsVertical&&(o.showLogo=!1);c=s(s({},o),y);try{h=f.call(this,t,c)||this}catch(l){e._processMapException(l,t);throw l;}return typeof MapLoadingDetector!="undefined"&&MapLoadingDetector.addMap&&MapLoadingDetector.addMap(h),h._mbMap=h._getMap(),h.id=h._mbMap._getMapId(),h._setOptionsForRasterMode(),h._mbMap._maxTileCacheZoomLevels=r.maxTileCacheZoomLevels,h.getMapContainer().classList.add("MicrosoftMap"),h.mapReady=new Promise(function(n){h._isReady()?n(h):h.events.addOnce("ready",function(){n(h)})}),h.mapLoaded=new et,h.mapLoaded.then(function(){var n,t;h._isMapLoaded=!0;n=o.fadeDuration;(typeof n!="number"||isNaN(n))&&(t=i.DeviceInfo,n=t.deviceClassification===0?r.fadeDuration||0:0);h._mbMap._fadeDuration=n}),h.pltEX=new et,h._disposables=[h.mapClicked=new w],a=h.controls.getControls(),h.controls.remove(a),h.controls.add(new wt,{position:atlas.ControlPosition.NonFixed}),h.controls.add([new dt({units:"imperial"}),new dt({units:"metric"})],{position:atlas.ControlPosition.BottomRight}),ut.localize(h.controls),h.clientProperties={},v.addControlInstrumentation(h),h._attachDebuggingOptions(),h._disposables.push(new ki(h)),e._firstInstanceId===-1&&(e._firstInstanceId=h.id,h._disposables.push(new nt(h))),h.mapFirstIdle=new Promise(function(n){h.events.addOnce("idle",function(){n()})}),h}return c(e,f),e.prototype.dispose=function(){this._isDisposed||(e._firstInstanceId===this.id&&(e._firstInstanceId=-1),f.prototype._getMap.call(this).remove(),u._clearDisposables(this._disposables),u._nullifyClass(this),this._isDisposed=!0)},e.prototype.createDataSource=function(n){return this.mapReady.then(function(t){var i=t.sources.getById(n);return i||(i=new atlas.source.DataSource(n),t.sources.add(i)),i})},e.prototype.setLayoutProperty=function(n,t,i){var u=this._mbMap,r;u.getLayer(n)&&(r=u.getLayoutProperty(n,t),t!=="visibility"||r||(r="visible"),r!==i&&u.setLayoutProperty(n,t,i))},e.prototype.setCamera=function(n,t){var h=r.isRasterMode,e,c,o;n&&!n.type&&this._isMapLoaded&&!h&&i.DeviceInfo.deviceClassification===0&&(n=s(s({},n),u.computeAnimation(this.getCamera(),n)));n.zoom&&(n.zoom=h?Math.round(n.zoom):Math.round(n.zoom*100)/100);h&&(n.pitch=n.bearing=0);e=this.getCamera();f.prototype.setCamera.call(this,n);n&&t&&(n.zoom!==undefined&&n.zoom!==e.zoom&&(o=n.zoom>e.zoom?"ZoomIn":"ZoomOut",v.log(o,"NC",e,this.getStyle().style),u.logMsnCfv(o)),h||(n.bearing!==undefined&&n.bearing!==e.bearing&&(c=n.bearing-e.bearing,o=c>0&&c<180||c<-180?"RotateLeft":"RotateRight",v.log(o,"NC",e,this.getStyle().style)),n.pitch!==undefined&&n.pitch!==e.pitch&&(o=n.pitch>e.pitch?"IncreasePitch":"DecreasePitch",v.log(o,"NC",e,this.getStyle().style))))},e.prototype.getMapSize=function(){var n=window.devicePixelRatio,t=this.getCanvas();return{width:t.width/n,height:t.height/n}},e.prototype.getIsMapLoaded=function(){return this._isMapLoaded},e.prototype._attachDebuggingOptions=function(){var t=this;this.mapReady.then(function(){t._mbMap.showCollisionBoxes=r.showCollisionBoxes;t._mbMap.showPadding=r.showPadding;t._mbMap.showTileBoundaries=!!r.tileBoundary;t._mbMap.collisionSymbolSpacing=r.collisionSymbolSpacing;n.testHooksEnabled&&(t._mbMap.ignorePreviousAnchors=!0)})},e.prototype._setOptionsForRasterMode=function(){r.isRasterMode&&(this._mbMap.keyboard.disableRotation(),this._mbMap.dragRotate.disable(),this._mbMap.touchZoomRotate.disable(),this._mbMap.setMaxPitch(0),this._mbMap.scrollZoom.setWheelZoomRate(1))},e._getDefaultServiceOptions=function(t){var f={},o;return t.styleSet||e._updateMapStyleDefinition(),f.styleSet=t.styleSet||r.mapStyleDefinition,(n.isMapsVertical||n.isMapsAnswer)&&(f.refreshExpiredTiles=typeof t.refreshExpiredTiles=="boolean"?t.refreshExpiredTiles:!1),f.validateStyle=!!r.forceMLStyleVal,f.fadeDuration=0,o=t.localIdeographFontFamily||r.localIdeographFontFamily,o&&(f.localIdeographFontFamily=o.toLowerCase()==="false"?!1:o),f.enableAccessibilityLocationFallback=!1,f.maxParallelImageRequests=t.maxParallelImageRequests||r.maxParallelImageRequests,ot.registerRasterProtocol(),f.transformRequest=function(f,e){var h,o={url:f},c,l,a,v,s;return e==="Style"?(c=i.DeviceInfo,o.url=f.replace("{renderingMode}",c.renderingMode+"").replace("{contrastMode}",c.contrastMode+""),t.styleSet||((h=r.mapStyleDefinition)===null||h===void 0?void 0:h.addCredentials)&&(o.credentials="include")):e==="SpriteImage"?o.url=o.url.replace("https://","raster://"):e==="Tile"&&(n.isOnCorpnet&&f.includes("mvt?")&&(l=u._getUrlParam(window.location,"st"),l&&(f+="&st="+l)),o.url=f.replace("{credentials}",n.dynamicProperties.sessionKey)),n.mockEnabled&&typeof FunctionalTestHooks!="undefined"&&(o.url=FunctionalTestHooks.TransformRequest(o.url,e)),a=t.transformRequest,a&&(v=a(o.url,e)),s=v||o,n.testHooksEnabled&&console.log("TransformRequest- resourceType: ".concat(e,", url - ").concat(s?s.url:"request url empty",", ")),s},f},e._updateMapStyleDefinition=function(){var n=r.mapStyleDefinition,u=i.DeviceInfo.contrastMode,t;ut.localizeStyleDisplayName(n);u!=="none"&&(n.styles=n.styles.map(function(n){var r,t=(r=n.contrast)===null||r===void 0?void 0:r.filter(function(n){return n.mode===u}),i;return(t===null||t===void 0?void 0:t.length)>0&&(i=t[0],n.mapStyleId=i.mapStyleId,n.theme=i.theme,n.thumbnail=i.thumbnail),n}));t=n.styles.find(function(n){return n.style});t&&(t.url=null)},e._processMapException=function(r,u){var l=typeof u=="string"?document.getElementById(u):u,h=r.message,e,o,f,s,c;h.indexOf("Failed to initialize WebGL")>-1&&(n.isMapsVertical?(e=i.logger,e.logCriticalError(r,null,!0,!0),e.flush(),o=new URL(location.href),o.searchParams.set("forcev8","1"),location.replace(o.toString())):(f="",h.indexOf("disabled by")>-1?f=t.L_WebGLError_Disabled:(s="https://get.webgl.org",c="<a href='".concat(s,"' target='blank'>").concat(s,"<\/a>"),f=t.L_WebGLError_Generic.replace("{0}",c)),l.innerHTML="<div class='webglFailedMsg'>".concat(f,"<\/div>")))},e.defaultWheelZoomRate=3/450,e._firstInstanceId=-1,e}(atlas.Map),function(n){function t(n,t,i,r){n.remove(t,i,r)}function i(n,i,r,u){var f=n.events;return f.add(i,r,u),{dispose:function(){t(f,i,r,u)}}}function r(n,i,r,u){var f=n.events;return f.addOnce(i,r,u),{dispose:function(){t(f,i,r,u)}}}function f(n,t,f){for(var o,s,l,a,h=[],e=0,c=["dragend","wheel","boxzoomend","dblclick","touchend"];e<c.length;e++)o=c[e],h.push(f?r(n,o,t):i(n,o,t));return s=n.getMapContainer(),l=function(n){var i=n.target,r;i&&i.tagName&&(r=i.tagName.toLowerCase(),(r==="button"||r==="div")&&t&&t(n))},s.addEventListener("click",l,{once:f}),a=function(n){u.indexOf(n.keyCode)>=0&&t(n)},s.addEventListener("keyup",a,{once:f}),h}n.add=i;n.addOnce=r;var u=[40,38,37,39,107,109,187,189];n.handleUserActions=f}(f||(f={})),function(t){function u(){i||(r("raster","https"),n.mockEnabled&&typeof FunctionalTestHooks!="undefined"&&r("rasterhttp","http"),i=!0)}function r(n,t){var i=window.maplibregl;i.addProtocol(n,function(i,r){var f=i.url.replace("".concat(n,"://"),"".concat(t,"://")),u=new Image,e=!1,o=i.credentials;return u.crossOrigin=o&&o==="include"?"use-credentials":"anonymous",u.fetchPriority="high",u.onload=function(){r(null,u);u.onerror=u.onload=null},u.onerror=function(){e||r(new Error("Could not load image: "+f));u.onerror=u.onload=null},u.src=f,{cancel:function(){e=!0;u.src=""}}})}var i=!1;t.registerRasterProtocol=u}(ot||(ot={}));var st=atlas.math,b=atlas.data,ai=atlas.layer,p=atlas.Pixel,h=atlas.data.BoundingBox,vi=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return c(t,n),t.prototype.onAdd=function(n){var e=this,r,t,i;return this._map=n,this._container=this.buildContainer(this._map,atlas.ControlStyle.auto),r=document.createElement("div"),r.classList.add("bm_LogoContainer"),t=document.createElement("a"),t.href=this._updateHref(),t.title="Microsoft Bing",t.setAttribute("aria-label","Microsoft Bing"),i=document.createElement("div"),i.id="bingLogo",i.classList.add("bingLogoLight"),t.append(i),r.append(t),this._container.appendChild(r),f.add(this._map,"stylechanged",function(){u.getMapStyle(e._map).theme==="dark"?i.classList.replace("bingLogoLight","bingLogoDark"):i.classList.replace("bingLogoDark","bingLogoLight");t.href=e._updateHref()}),this._container},t.prototype.dispose=function(){this._container=this._map=null;n.prototype.onRemove.call(this)},t.prototype._updateHref=function(){var n=this._map.getCamera(),t=n.center[1],i=n.center[0],r=n.zoom,u=this._map.getStyle().style.charAt(0),f=location&&location.protocol?location.protocol:"https:";return f+"//www.bing.com/maps?cp=".concat(t,"~").concat(i,"&lvl=").concat(r,"&style=").concat(u,"&FORM=BMLOGO")},t}(atlas.control.ControlBase),ut;(function(n){function o(n){n.styles.forEach(function(n){var t;n.displayName=(t=f.get(n.name))!==null&&t!==void 0?t:n.name})}function s(n,t){n.setAttribute("aria-label",t);n.setAttribute("alt",t);var i=n.nextElementSibling;i&&i.className.toLowerCase().startsWith("tooltiptext")&&(i.innerHTML=t)}function h(n){if(!i){i=!0;var t=n.add.bind(n);n.add=function(n,i){var h,v,w,c,y,l,a,p,f,o;for(t(n,i),Array.isArray(n)||(n=[n]),h=0,v=n;h<v.length;h++)for(w=v[h],c=0,y=e;c<y.length;c++)if(l=y[c],l.type&&w instanceof l.type){for(a=0,p=l.overrides;a<p.length;a++)f=p[a],f.class&&(o=document.getElementsByClassName("".concat(r," ").concat(f.class)),o.length===0&&(o=document.getElementsByClassName("".concat(u," ").concat(f.class))),o.length>0&&s(o[0],f.str));break}}}}var r="azure-maps-control-button",u="azure-maps-control-list-button",i=!1,f=new Map([["road",t.L_Style_Road],["roaddark",t.L_Style_DarkRoad],["hybrid",t.L_Style_Hybrid],["aerial",t.L_Style_Satellite],["birdseye",t.L_Style_Birdseye],["streetside",t.L_Style_Streetside],["grayscale",t.L_Style_Grayscale],["canvas_light",t.L_Style_LightCanvas],["canvas_dark",t.L_Style_DarkCanvas],["ordnancesurvey",t.L_Style_OS],]),e=[{type:atlas.control.ZoomControl,overrides:[{"class":"zoom-in",str:t.L_ZoomIn},{"class":"zoom-out",str:t.L_ZoomOut}]},{type:atlas.control.PitchControl,overrides:[{"class":"pitch",str:t.L_Pitch_Reset},{"class":"pitch-down",str:t.L_Pitch_Decrease},{"class":"pitch-up",str:t.L_Pitch_Increase}]},{type:atlas.control.CompassControl,overrides:[{"class":"rotation",str:t.L_Compass_Reset},{"class":"rotation-right",str:t.L_Compass_Right},{"class":"rotation-left",str:t.L_Compass_Left}]},{type:atlas.control.StyleControl,overrides:[{"class":"curr-style",str:t.L_Style_Select},]}];n.localizeStyleDisplayName=o;n.localize=h})(ut||(ut={}));wt=function(i){function f(){var t=i.call(this)||this;return t._providerId="base",t._beProviderId="birdseye",t._onStyleChangeReset=function(){t._copyrights={};t._previousUrl=t._previousBeUrl=null;t._updateCopyrightContainer()},t._downloadCopyright=function(){var i,o=function(n,i){t._previousRequestKeys.push(y.downloadJsonp(n,"copyright",function(n){t.appendCopyright(i,t._getCopyrights(n))}))},f=t._getCopyrightUrl(r.imageryCopyrightUrlFormat),s,e,n;t._previousUrl!==f&&(t._previousRequestKeys.forEach(function(n){return y.abortRequest(n)}),t._previousRequestKeys=[],t._previousUrl=f,o(f,t._providerId));s=u.getMapStyle(t._azureMap);((i=t._birdseyeControl)===null||i===void 0?void 0:i.isActive)&&s.name==="birdseye"&&(e=t._birdseyeControl.getCurrentSceneProductId(),n=t._getCopyrightUrl(r.beV2ImageryCopyrightUrlFormat,e),e?t._previousBeUrl!==n&&(t._previousBeUrl=n,o(n,t._beProviderId)):t.clearCopyright(t._beProviderId))},t._getCopyrights=function(i){var r;return i&&(r=i.resourceSets&&i.resourceSets.length>0&&i.resourceSets[0]&&i.resourceSets[0].resources[0]?i.resourceSets[0].resources[0].imageryProviders:[]),r&&n.isSDK&&r.push(t._getDefaultCopyright()),r},t._getHMTLCopyrightMarkup=function(n){var t=n.toLowerCase().indexOf(" http"),i,r;return t>-1&&(n.indexOf("href")===-1?(i=n.substr(t).trim(),r=n.substr(0,t).trim(),n='<a target="_blank" href="'.concat(i,'">').concat(r,"<\/a>")):n.indexOf("target=")===-1&&(n=n.replace("<a ",'<a target="_blank" '))),n},t._copyrights={},t._previousRequestKeys=[],t}return c(f,i),f.prototype.onAdd=function(n){var t=this;return this._azureMap=n,this._container=this.buildContainer(n,atlas.ControlStyle.auto),this._container.className="map-copyright",this._copyrightDiv=document.createElement("div"),this._copyrightDiv.className="azure-map-copyright",n.mapLoaded.then(function(){t._container.appendChild(t._copyrightDiv);t._downloadCopyright();n.events.add("idle",t._downloadCopyright);n.events.add("stylechanged",t._onStyleChangeReset)}),this._container},f.prototype.onRemove=function(){this._container=this._copyrightDiv=this._azureMap=null;this._azureMap.events.remove("idle",this._downloadCopyright);this._azureMap.events.remove("stylechanged",this._onStyleChangeReset);i.prototype.onRemove.call(this)},f.prototype.dispose=function(){this.onRemove()},f.prototype.appendCopyright=function(n,t){t&&(this._copyrights[n]=t,this._updateCopyrightContainer())},f.prototype._setBirdseyeControl=function(n){this._birdseyeControl||(this._birdseyeControl=n)},f.prototype.clearCopyright=function(n){delete this._copyrights[n];this._updateCopyrightContainer()},f.prototype._updateCopyrightContainer=function(){for(var t,r,e=Object.keys(this._copyrights),n=[],u=[],i=0,f=e;i<f.length;i++)t=f[i],t!==this._providerId?n.push.apply(n,this._copyrights[t]):u=this._copyrights[t];n.push.apply(n,u);n=Array.from(new Set(n));n=n.map(this._getHMTLCopyrightMarkup);r=n.join(", ");r!==this._previousCopyright&&(this._copyrightDiv.innerHTML=this._previousCopyright=r)},f.prototype._getDefaultCopyright=function(){var i=n.testHooksEnabled?"YYYY":(new Date).getFullYear().toString();return t.L_microsoftcopyright_text.replace("{year}",i)},f.prototype._getCopyrightUrl=function(t,i){var o=this._azureMap.getCamera(),f=o.bounds,e=b.BoundingBox.fromPositions([[f[0],f[1]],[f[2],f[3]]]),s=n.dynamicProperties,h=u.getMapStyle(this._azureMap);return t.replace(/{imagerySet}/,h.copyrightImageryId).replace(/{zoom}/,Math.floor(u.convertZoom(o.zoom,0)).toString()).replace(/{minLat}/,e[1].toString()).replace(/{minLon}/,e[0].toString()).replace(/{maxLat}/,e[3].toString()).replace(/{maxLon}/,e[2].toString()).replace(/{heading}/,o.bearing.toString()).replace(/{credentials}/,s.sessionKey).replace(/{mkt}/,s.market).replace(/{ml}/,r.copyrightMapLayers).replace(/{productId}/,i)},f}(atlas.control.ControlBase),function(n){function t(n){return new Promise(function(t,r){if(atlas.animations)t(atlas.animations.getEasingFn(n));else{var u=function(){t(atlas.animations.getEasingFn(n))};i.globalContainer.instanceAsync("AzureMapAnimation",u,null,!0,function(n,t){r(n+","+t)})}})}function r(n,t,i,r,u){var f="translate3d",e="scale3d";return new Promise(function(o){function s(){var b=performance.now()-l,k,a,d,g;if(b<r){k=b/r;a=t(k);u&&(a=1-a);var p=h*(1-a)/2,w=c*(1-a)/2,v=0,y=0;switch(i){case"top":y=-p;break;case"bottom":y=p;break;case"left":v=-w;break;case"right":v=w;break;case"bottom-left":v=-w;y=p;break;case"top-left":v=-w;y=-p;break;case"bottom-right":v=w;y=p;break;case"top-right":v=w;y=-p}d="".concat(f,"(").concat(v,"px, ").concat(y,"px, 0) ").concat(e,"(").concat(a,", ").concat(a,", 1)");n.style.transform=d;requestAnimationFrame(s)}else g="".concat(f,"(0,0,0) ").concat(e)+(u?"(0,0,0)":"(1,1,1)"),n.style.transform=g,o()}var h=n.clientHeight,c=n.clientWidth,l=performance.now();requestAnimationFrame(s)})}function u(n,i,u,f,e){return atlas.animations?r(n,atlas.animations.getEasingFn(i),u,f,e):t(i).then(function(t){return r(n,t,u,f,e)})}n.prepareFunction=t;n.run=u}(g||(g={})),function(t){function o(t,r,u,f,e){var s,o,h;n.enableInstrumentation&&(o={H:u&&u.bearing,MM:"Mercator",MS:c(f)},u&&(o.CP={latitude:u.center[1],longitude:u.center[0]},o.H=u.bearing),e&&(o.S=e),h={feature:"MC",action:r,data:o},t&&(h.data.EL=t),(s=i.logger)===null||s===void 0?void 0:s.logObject(h))}function s(u){var o=i.logger,s;o&&(h(u),f.add(u,"stylechanged",function(n){t.log("MapMode","MapTypeChanged",u.getCamera(),n.style);n.style==="ordnancesurvey"&&o.logSnrPageNameForMapControl("os",!1)}),e||(r.enableClientInstrumentationIG&&(s=void 0,s=n.isSDK?"sdk":n.isMsftPartner?"msft":"omo",o.logSnrPageNameForMapControl(s,!0)),typeof _G!="undefined"&&u.events.addOnce("idle",function(){o.logObject({feature:"BS",action:"BS_FIN",TS:Math.round(performance.now()),data:{}},_G.IG,!0);o.flush()})));e=!0}function h(n){f.add(n,"movestart",function(){u=n.getCamera()});f.add(n,"idle",function(){if(u){var i=n.getCamera(),t=void 0;i.zoom!==u.zoom?t="MapZoom":b.Position.areEqual(i.center,u.center)||(t="MapPan");t&&o(null,t,i,n.getStyle().style);u=null}})}function c(n){var t=n;switch(n){case"road":t="r";break;case"roaddark":t="d";break;case"aerial":t="a";break;case"hybrid":t="h";break;case"ordnancesurvey":t="os";break;case"streetside":t="x"}return t}var e=!1,u;t.log=o;t.addControlInstrumentation=s}(v||(v={}));ht=function(){function n(){this.id=u._nextId().toString()}return n}();bt=function(n){function t(i,r){var u=n.call(this)||this,e;return u._map=i,u._infoboxOptions=r||{},(r===null||r===void 0?void 0:r.containerClassName)&&(t._containerClass=r.containerClassName),u._updateHtmlContent(r),e=u._marker=new atlas.HtmlMarker(s(s({},r),{visible:!1})),i.markers.add(e),u._disposables=[f.add(i,"mouseenter",e,function(){return u._onMouseenter()}),f.add(i,"mouseleave",e,function(){return u._onMouseleave()}),f.add(i,"click",e,function(){return u.infoboxClicked.invoke()}),u.infoboxClicked=new w,u.infoboxEnter=new w,u.infoboxLeave=new w],u._setMarkerOptions(r,!0),u}return c(t,n),t.prototype.dispose=function(){this.isDisposed||(this._map&&this._map.markers.remove(this._marker),u._clearDisposables(this._disposables),u._nullifyClass(this),this.isDisposed=!0)},t.prototype.getOptions=function(){return s(s({},this._marker&&this._marker.getOptions()),this._infoboxOptions)},t.prototype.setOptions=function(n){var i=this;this.isDisposed||(n.containerClassName&&(t._containerClass=n.containerClassName),this._updateHtmlContent(n),this._timerId&&(window.clearTimeout(this._timerId),this._timerId=null),n&&n.delayTime>0?this._timerId=a.setTimeout(function(){return i._setMarkerOptions(n)},n.delayTime):this._setMarkerOptions(n))},t.prototype.getImpl=function(){return this._marker},t.prototype.getRootNode=function(){var n,t=(n=this._marker)===null||n===void 0?void 0:n.getOptions().htmlContent;return t!=="string"?t:null},t.getAdjustedAnchor=function(n,t){var i=t.position,r=t.pixelOffset,u="bottom",f="left",s;if(i){var e=300,h=n.getMapContainer(),c=h.clientWidth,o=n.positionsToPixels([i])[0];e>atlas.Pixel.getY(o)&&(u="top");c-e<atlas.Pixel.getX(o)&&(f="right",r[0]*=-1)}return s="".concat(u,"-").concat(f),{anchor:s,pixelOffset:r}},t.prototype._updateHtmlContent=function(n){var i=n&&(n.infoboxContent||n.htmlContent),r,f,e,u;i&&(r=document.createElement("div"),r.className="InfoboxCustom",f=t._containerClass,typeof i=="string"?(e=n.hideContainer?"".concat(i):'<div class="'.concat(f,'">').concat(i,"<\/div>"),r.innerHTML=e):n.hideContainer?r.append(i):(u=document.createElement("div"),u.className=f,r.append(u),u.append(i)),n.htmlContent=r)},t.prototype._onMouseenter=function(){this.preventAutoClose=!0},t.prototype._onMouseleave=function(){var n=this.getOptions();this.preventAutoClose=!1;n.keepOpenOnMouseleave||this.setOptions({visible:!1,delayTime:n.delayTime||500})},t.prototype._setMarkerOptions=function(n,i){var a=this,u=this._marker,e=function(){a._infoboxOptions=s(s({},a._infoboxOptions),n)},c,r,l;if(u){var o=this.getOptions(),w=o.visible?1:0,h=(n===null||n===void 0?void 0:n.visible)?1:0,f=void 0;if(f=n&&(typeof n.animationDuration=="number"||n.animationDuration===null)?n.animationDuration:o.animationDuration,typeof f=="undefined"&&(f=t._defaultAnimation),c=this.getRootNode(),r=c.querySelector&&c.querySelector("."+t._containerClass),r&&f>0&&(i||w^h)){var v="translate3d(0,0,0) scale3d"+(h?"(0,0,0)":"(1,1,1)"),y=(n===null||n===void 0?void 0:n.anchor)||o.anchor,p="easeInOutQuart";h?(u.setOptions(n),r=this.getRootNode().querySelector("."+t._containerClass),r.style.transform=v,g.run(r,p,y,f).then(e)):(r.style.transform=v,g.run(r,p,y,f,!0).then(function(){u.setOptions(n);e()}))}else u.setOptions(n),e();l=function(n){n.stopPropagation()};u.getElement().addEventListener("click",l);u.getElement().addEventListener("mousemove",l)}},t._containerClass="MapsInfoboxContainer",t._defaultAnimation=250,t}(ht),function(n){function u(n,i,u){var f,e;return t||(f=n.getMapContainer(),t=document.createElement("div"),t.setAttribute("id",r),t.style.position="absolute",t.style.transform="scale3d(0, 0, 1)",f.append(t)),e=function(r){var f=r.metadata.pixelRatio,c=r.icon.width/f,l=r.icon.height/f,e=c+"px",o=l+"px",s=i.geometry,h=n.positionsToPixels([new b.Position(s.x,s.y)])[0],a=h[0]+r.offset[0],v=h[1]+r.offset[1],u=r.canvas;return u.style.width=e,u.style.height=o,t.innerHTML="",t.style.width=e,t.style.height=o,t.appendChild(u),t.style.left=a+"px",t.style.top=v+"px",t},u.getPrimitiveIcon(i).then(function(n){return e(n)})}function f(n,r,f){var o=u(n,r,f),e="easeOutBounce",s=g.prepareFunction(e);return Promise.all([o,s]).then(function(){return g.run(t,e,"bottom",i)})}function e(){t&&(t.style.transform="translate3d(0,0,0) scale3d(0,0,1)")}var i=500,r="poiPopUp",t;n.popupAnimation=f;n.reset=e}(ct||(ct={}));var it=function(){function n(t,i,r,u,f){var e,s,h,o;u===void 0&&(u=!1);e=this;this._toggleClass=function(n,t){var i,r=(i=e._element)===null||i===void 0?void 0:i.classList;r&&(t?r.add(n):r.remove(n))};this._addInuse=function(){clearTimeout(e._timer);e._deactivateOthers();e._toggleClass("in-use",!1);e._toggleClass("user-interacted",!0)};this._removeInuse=function(){e._control.isDefault||(clearTimeout(e._timer),e._timer=a.setTimeout(e._timeoutHandler,2e3))};this.deactivate=function(){var n;e._toggleClass("in-use",!1);e._toggleClass("user-interacted",!1);clearTimeout(e._timer);(n=e._element.querySelector(".sub-container"))===null||n===void 0?void 0:n.classList.add("hidden-accessible-element")};this._focusOut=function(n){e._element.contains(n.relatedTarget)||e._control.isDefault||e.deactivate()};this._clickHandler=function(n){e._element.contains(n.target)?(e._addInuse(n),e._clickCallback&&e._clickCallback(n)):e._control.isDefault||(e._overlapDefault?e._timeoutHandler():e.deactivate())};this._timeoutHandler=function(){var t,r,u,i;for(e.deactivate(),t=0,r=Object.keys(n._allControls);t<r.length;t++)if(u=r[t],i=n._allControls[u],i.isDefault&&i.activate){i.activate();break}};this._deactivateOthers=function(){var i,o=(i=e._element)===null||i===void 0?void 0:i.getAttribute("id"),t,r,u,f;if(o)for(t=0,r=Object.keys(n._allControls);t<r.length;t++)u=r[t],o!==u&&(f=n._allControls[u],(!f.isDefault||e._overlapDefault)&&f.deactivate())};this._keyboardHandler=function(n){n.code==="Escape"?e._timeoutHandler():(n.code==="Enter"||n.code==="Space")&&(e._addInuse(n),n.target instanceof HTMLInputElement||e._clickCallback&&e._clickCallback(n))};s=this._addInuse;h=this._removeInuse;this._overlapDefault=u;r&&(this._element=r,o=function(n,t,i){r.addEventListener(n,t,i)},window.addEventListener("click",this._clickHandler),o("mouseover",s),o("focusin",s),o("mouseleave",h),o("focusout",this._focusOut),o("keydown",this._keyboardHandler),this._clickCallback=f);n._allControls[t]=i;this._control=i}return n.prototype.dispose=function(){var i=this;if(this._element){var t=this._addInuse,r=this._removeInuse,n=function(n,t,r){i._element.removeEventListener(n,t,r)};window.removeEventListener("click",this._clickHandler);n("mouseover",t);n("focusin",t);n("mouseleave",r);n("focusout",this._focusOut);n("keydown",this._keyboardHandler)}},n._allControls={},n}(),yi=function(n){function i(t){var i=n.call(this)||this;return i.setGeochainCollapseState=function(n,t){n&&(i.isCollapsed=!i.isCollapsed,t&&yt.setItem("geoChainCollapsed",i.isCollapsed?"1":"0"),i.isCollapsed||i.updateGeoChain());var r=i.isCollapsed?"geochainCollapse":"geochainUncollapse",u=i.isCollapsed?"geochainUncollapse":"geochainCollapse";i.geochainExpander.classList.replace(r,u);i.geochainSegmentContainer.style.display=i.isCollapsed?"none":"inline"},i._disposables=[],i.options=t,i.allowToggleOnResize=!0,i.isCollapsed=t.geochain==="collapsed"||yt.getItem("geoChainCollapsed")==="1",i}return c(i,n),i.prototype.onAdd=function(n,t){var i=this,r;return this.isCollapsed=this.isCollapsed||n.getMapSize().width<this.options.minMapWidthforGeochain,this.reserveGeocoder=new hi,this.geoChainManager=new oi(this.reserveGeocoder),this.map=n,r=this.constructGeochain(t),this._disposables.push(f.add(this.map,"resize",function(){if(i.allowToggleOnResize){var n=i.map.getMapSize().width;(i.isCollapsed&&n>=i.options.minMapWidthforGeochain||!i.isCollapsed&&n<i.options.minMapWidthforGeochain)&&i.setGeochainCollapseState(!0)}}),f.add(this.map,"idle",function(){i.updateGeoChain()})),r},i.prototype.onRemove=function(){u._clearDisposables(this._disposables);u._nullifyClass(this)},i.prototype.dispose=function(){this.onRemove()},i.prototype.constructGeochain=function(n){var e=this,u=this.geochainContainer=document.createElement("div"),i,f;return u.classList.add("geochainContainer"),i=this.geochainExpander=r.bingStylePicker?document.createElement("button"):document.createElement("a"),i.classList.add("geochainActionButton"),i.classList.add("geochainCollapse"),i.setAttribute("title",t.L_GeochainTitle_Text),f=this.geochainSegmentContainer=document.createElement("span"),n&&(n.position===atlas.ControlPosition.TopRight||n.position===atlas.ControlPosition.BottomRight)?(u.appendChild(i),u.appendChild(f)):(u.appendChild(f),u.appendChild(i)),this.setGeochainCollapseState(!1),i.addEventListener("click",function(){e.allowToggleOnResize=!1;e.setGeochainCollapseState(!0,!0)}),u},i.prototype.updateGeoChain=function(){var n=this;this.isCollapsed||this.geoChainManager.getGeochain(this.map,function(t){var r,f,i,u,e;if(t){for(r="",f=0,i=0,u=t;i<u.length;i++)e=u[i],r+='<a class="geochainSegment" data-index="'.concat(f++,'" data-tag="geochainSegment">').concat(e.displayName,"<\/a>");n.geochainSegmentContainer.innerHTML="<span>".concat(r,"<\/span>")}})},i}(atlas.control.ControlBase),kt=function(i){function e(n){var t=i.call(this)||this,r,u;return t.isDefault=!0,t.deactivate=function(){var n;(n=t._commonHandler)===null||n===void 0?void 0:n.deactivate()},t.activate=function(){t._container.classList.add("user-interacted")},t._closeToolTip=function(){t._toolTip&&(t._toolTip.close(),t._toolTip.remove(),t._toolTip=null)},r=e.defaultOptions,u=n?s(s({},r),n):s({},r),t._options=u,t.locateMeEvent=new w,t}return c(e,i),e.prototype.onAdd=function(n,i){var u=this,e,f,o;return this._map=n,e=t.L_LocateMe_Text,f=this._container=this.buildContainer(n,this._options.style,e),n.locateMeEvent=this.locateMeEvent,o=function(){var t=u._options.geochain!=="disabled";t&&(u._geochainControl=new yi(u._options));i&&(i.position===atlas.ControlPosition.TopRight||i.position===atlas.ControlPosition.BottomRight)?(t&&u._container.append(u._geochainControl.onAdd(n,i)),f.append(u._constructLocateMeButton(e))):(f.append(u._constructLocateMeButton(e)),t&&u._container.append(u._geochainControl.onAdd(n,i)))},r.bingStylePicker?n.mapLoaded.then(function(){var n,t;o();n="locateMe";f.setAttribute("id",n);u._commonHandler=new it(n,u,f);t=document.createElement("div");t.classList.add("locateMeBtnBg");f.append(t);u.activate()}):o(),f},e.prototype.onRemove=function(){var n;i.prototype.onRemove.call(this);this._container&&(this._geochainControl&&this._geochainControl.dispose(),(n=this._commonHandler)===null||n===void 0?void 0:n.dispose(),this._container.remove(),this._mePoi.dispose(),u._nullifyClass(this))},e.prototype.dispose=function(){this.onRemove()},e.prototype._constructLocateMeButton=function(n){var i=this,t=document.createElement("button");return t.classList.add("azure-maps-control-button"),t.classList.add("locateMeBtn"),t.setAttribute("aria-label",n),t.setAttribute("alt",n),t.setAttribute("title",n),t.setAttribute("type","button"),t.addEventListener("click",function(){return i._locateMe()}),t},e.prototype._locateMe=function(){var t=this,i=function(i){var c,l=!1,a=!1,s=0,o,e=n.dynamicProperties,f,v;if(i.success&&i.location&&i.position&&i.position.coords&&i.position.coords.accuracy>=0&&(s=i.position.coords.accuracy,l=s<=r.locateMeHighAccuracyMeters,a=l||!e.locationIsPreferenceBased,a&&(f=i.location,o="w3cLocation")),f||(e.locationIsPreferenceBased&&e.preferenceBasedLocation?(f=u.parseLatLong(e.preferenceBasedLocation),o="preferenceBasedLocation"):e.location?(f=u.parseLatLong(e.location),o="FDLocation"):e.reverseIPLocation?(f=u.parseLatLong(e.reverseIPLocation),o="reverseIPLocation"):e.marketLocation&&(f=u.parseLatLong(e.marketLocation),o="marketLocation")),f){var y=t._map.getMapSize(),p=Math.max(y.width,y.height),h=t._map.getCamera().zoom;s>0&&p>0&&(h=rt.fromScale(f,6*s/p,!0));h=Math.max(Math.min(h,16),11);v={location:f,accuracy:s,locationType:o};l?t._options.displayUserLocationPoi&&(t._mePoi||(t._mePoi=new pi(t._map)),t._mePoi.showMePoi(f,t._options.enablePoiAnimation)):(t._displayError(f,a),((c=i.error)===null||c===void 0?void 0:c.code)>0&&(v.error=i.error.code));t.locateMeEvent.invoke(v);t._map.setCamera({center:f,zoom:h})}};this._geoLocationProvider||(this._geoLocationProvider=new si(window,null));this._geoLocationProvider.GetCurrentPosition({callback:i});v.log("MyLocation","NC",this._map.getCamera(),this._map.getStyle().style)},e.prototype._displayError=function(i,u){var e=this;f.addOnce(this._map,"moveend",function(){var o="",s,h,c;if((n.isMapsAnswer||n.isMapsVertical)&&(s=r.bingSettingsUrl.replace("{returnUrl}",encodeURIComponent(window.location.href)).replace("{formCode}",r.locateMeFormCode),o="<div><a role='link' href='".concat(s,"'>").concat(t.L_LocateMe_ChangeSettings_Text,"<\/a><\/div>")),h=u?t.L_LocateMe_Error_Text_Approximate_Location:t.L_LocateMe_Error_Text_Setting,c="<div class='bm_LocateMeErrorDialog'>"+"<div data-role='message'>".concat(h,"<\/div>")+"".concat(o,"<\/div>"),e._toolTip){if(e._toolTip.isOpen)return}else e._toolTip=new atlas.Popup({closeButton:!1,draggable:!1,showPointer:!1,position:i,content:c,pixelOffset:[0,e._map.getMapSize().height/2]});e._toolTip.open(e._map);f.addOnce(e._map,"idle",function(){f.addOnce(e._map,"movestart",e._closeToolTip)})})},e.defaultOptions={style:atlas.ControlStyle.light,geochain:"disabled",displayUserLocationPoi:!0,enablePoiAnimation:!0,minMapWidthforGeochain:900},e}(atlas.control.ControlBase),pi=function(){function n(n){var t=this;this._addAnimationLayer=function(n,i){t._animationLayer=new ai.BubbleLayer(i,null,{color:"rgb(0, 204, 255)",strokeWidth:0,pitchAlignment:"map",visible:!1});n.layers.unshift(t._animationLayer)};this._toggleAnimation=function(){var n=b.BoundingBox.containsPosition(t._map.getCamera().bounds,t._poiLocation);isNaN(t._animationRequestId)&&n?t._pulseAnimation(0):n||(cancelAnimationFrame(t._animationRequestId),t._animationRequestId=NaN)};this._pulseAnimation=function(n){var r,i=n%4e3/4e3;r=i<.1?{radius:0,visible:!1}:{radius:50*i,opacity:Math.max(.9-i,0),visible:!0};t._animationLayer.setOptions(r);t._animationRequestId=requestAnimationFrame(t._pulseAnimation)};this._map=n;this._disposables=[]}return n.prototype.showMePoi=function(n,t){var i=this,r;this._isShowMePoiDisplayed||(this._isShowMePoiDisplayed=!0,this._poiLocation=n,r=function(){var r=[{geometry:{geometryType:1,x:n[0],y:n[1]},bucket:"354",primitiveType:11,id:"MePoi",state:2,isHoverEnabled:!1}];i._primitiveManager.modifyLayerGroupCallback=i._addAnimationLayer;i._primitiveManager.add(r).then(function(){t&&i._animatePoi()})},this._primitiveManager?r():li.resolveBySourceKey("BingMapStyle",function(){var n=Microsoft.Maps.BingMapStyle;n.init(i._map);i._primitiveManager=new Microsoft.Maps.BingMapStyle.PrimitiveManager(i._map);i._disposables.push(i._primitiveManager);r()}))},n.prototype.dispose=function(){cancelAnimationFrame(this._animationRequestId);this._map.layers.remove(this._animationLayer);u._clearDisposables(this._disposables);u._nullifyClass(this)},n.prototype._animatePoi=function(){var n=this;a.setTimeout(function(){n._disposables.push(f.add(n._map,"moveend",n._toggleAnimation));n._toggleAnimation()},1e3)},n}(),dt=function(n){function t(i){var r=n.call(this)||this;return r._options={units:"imperial",maxBarLength:100},r._updateScaleBar=function(){var h="imperial",c="metric",y=r._map.getCamera(),f=r._options,l=r._map.positionsToPixels([y.center]),a=r._map.pixelsToPositions([[0,l[0][1]],[f.maxBarLength,l[0][1]]]),n=f.units.toLowerCase(),v,s;n===h?n="miles":n===c&&(n="kilometers");var i=atlas.math.getDistanceTo(a[0],a[1],n),e=t._getRoundNumber,u=e(i),o=!1;u<2&&(n=f.units.toLowerCase(),n===h?(i*=5280,u=e(i),o=!0):n===c&&(i*=1e3,u=e(i),o=!0));v=u/i;s=r._scaleBar;s.style.width=f.maxBarLength*v+"px";s.innerHTML=r._createDistanceString(u,o)},r._options=Object.assign(r._options,i||{}),r}return c(t,n),t.prototype.onAdd=function(n){var t,i;return this._map=n,t=this.buildContainer(n,atlas.ControlStyle.auto),t.className="scalebar",i=this._scaleBar=document.createElement("div"),i.className="azure-scaleBar",t.appendChild(i),this._map.events.add("moveend",this._updateScaleBar),this._updateScaleBar(),t},t.prototype.onRemove=function(){this._map&&this._map.events.remove("moveend",this._updateScaleBar);this._map=null;this._scaleBar.remove();this._scaleBar=null},t._getRoundNumber=function(n){if(n>=2){var i=Math.pow(10,(Math.floor(n)+"").length-1),t=n/i;return t=t>=10?10:t>=5?5:t>=3?3:t>=2?2:1,i*t}return Math.round(100*n)/100},t.prototype._createDistanceString=function(n,t){return this._options.units?this._options.units.toLowerCase()==="metric"?t?n+" m":n+" km":t?n+" ft":n+" mi":null},t}(atlas.control.ControlBase),gt=function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.deactivate=function(){var n;(n=t._commonHandler)===null||n===void 0?void 0:n.deactivate()},t}return c(t,n),t.prototype.onAdd=function(t,i){var u=this,r=n.prototype.onAdd.call(this,t,i);return t.mapReady.then(function(){var n="bingCompass";r.setAttribute("id",n);u._commonHandler=new it(n,u,r)}),r},t.prototype.dispose=function(){this.onRemove()},t}(atlas.control.CompassControl),ni=function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.deactivate=function(){var n;(n=t._commonHandler)===null||n===void 0?void 0:n.deactivate()},t}return c(t,n),t.prototype.onAdd=function(t,i){var u=this,r=n.prototype.onAdd.call(this,t,i);return t.mapReady.then(function(){var n="bingPitch";r.setAttribute("id",n);u._commonHandler=new it(n,u,r)}),r},t.prototype.dispose=function(){this.onRemove()},t}(atlas.control.PitchControl),ti=function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.deactivate=function(){var n;(n=t._commonHandler)===null||n===void 0?void 0:n.deactivate()},t}return c(t,n),t.prototype.onAdd=function(t){var r=this,i=n.prototype.onAdd.call(this,t);return t.mapReady.then(function(){var n="bingZoom";i.setAttribute("id",n);r._commonHandler=new it(n,r,i)}),i},t.prototype.dispose=function(){this.onRemove()},t}(atlas.control.ZoomControl),wi='\n<div class="switchSlot '.concat("labelToggleSlot",'" tabindex="-1">\n    <input id="navbarLabelToggleInput" type="checkbox" class="').concat("labelToggleInput",'" checked="checked" aria-label="').concat(t.L_DropDownMenuLabelToggleButtonToolTip_Text,'" />\n    <label for="navbarLabelToggleInput" title="').concat(t.L_DetailsTooltip,'" class="').concat("labelStyle",'">').concat(t.L_Details,"<\/label>\n<\/div>"),bi='\n<div id="'.concat("bingStylePicker",'" class="NavBar_DropDown menu"\n     role="listbox" aria-multiselectable="true">\n     <div class="').concat("topRow",'">\n        <div class="').concat("slot"," ").concat("road",'" tabindex="0" role="option" ').concat("data-mapStyle",'="').concat("road",'">\n            <div class="').concat("mapTypeIcon",'"><\/div>\n            <div class="').concat("mapTypeLabel",'"><\/div>\n        <\/div>\n        <div class="').concat("slot"," ").concat("aerial",'" tabindex="0" role="option" ').concat("data-mapStyle",'="').concat("aerial",'">\n            <div class="').concat("mapTypeIcon",'"><\/div>\n            <div class="').concat("mapTypeLabel",'"><\/div>\n        <\/div>\n        <div class="').concat("slot"," ").concat("ordnancesurvey",'" tabindex="0" role="option" ').concat("data-mapStyle",'="').concat("ordnancesurvey",'">\n            <div class="').concat("mapTypeIcon",'"><\/div>\n            <div class="').concat("mapTypeLabel",'"><\/div>\n        <\/div>\n        <div class="').concat("slot"," ").concat("birdseye",'" tabindex="0" role="option" ').concat("data-mapStyle",'="').concat("birdseye",'">\n            <div class="').concat("mapTypeIcon",'"><\/div>\n            <div class="').concat("mapTypeLabel",'"><\/div>\n        <\/div>\n        <div class="').concat("slot"," ").concat("streetside",'" tabindex="0" role="option" ').concat("data-mapStyle",'="').concat("streetside",'">\n            <div class="').concat("mapTypeIcon",'"><\/div>\n            <div class="').concat("mapTypeLabel",'"><\/div>\n        <\/div>\n    <\/div>\n    <div class="').concat("mapTypeLabel",'">\n        ').concat(wi,'\n    <\/div>\n<\/div>\n<button id="').concat("bingStylePickerIcon",'"\n        class="azure-maps-control-button"\n        tabindex="0"\n        aria-label="').concat(t.L_Style_Select,'"\n        title="').concat(t.L_Style_Select,'"\n        type="button"><\/button>\n'),ii=function(n){function e(t,i){var r=n.call(this)||this;return r.isDefault=!1,r.deactivate=function(){var n;(n=r._commonHandler)===null||n===void 0?void 0:n.deactivate()},r._clickHandler=function(n){var f=n.target,e,o;if(f){var u=f.classList,i=r._container.querySelector("#navbarLabelToggleInput").checked,t=r.map.getStyle().style;u.contains("labelToggleInput")?(e=i?"1":"0",t==="road"||t==="roaddark"?(r._toggleRoadLabels(i),v.log("Details","NC",null,t,e)):t==="birdseye"?(r._toggleBElabels(i),v.log("Details","NC",null,t,e)):(t==="hybrid"||t==="aerial")&&r._switchStyle(null,i,t),r._setSSCoverage(i)):u.contains("slot")?r._switchStyle(f,i):u.contains("mapTypeIcon")||u.contains("mapTypeLabel")?r._switchStyle(f.parentElement,i):u.contains("azure-maps-control-button")&&(o="hybrid",(t==="aerial"||t==="hybrid"||t==="birdseye")&&(o="road"),r._switchStyle(null,i,o))}},r._disposables=[],r._options=i,r._shell=t,r}return c(e,n),e.prototype.onAdd=function(n){var t=this,i;return this.map=n,i=this._container=this.buildContainer(n,this._options.style,""),n.mapReady.then(function(){var s,u,h;for(i.setAttribute("id","bingStyleControl"),i.innerHTML=bi,s=i.querySelectorAll("div.".concat("slot")),u=0;u<s.length;++u){var r=s[u],c=r.getAttribute("data-mapStyle"),o=e.getStyleNode(c);o?(c==="roaddark"?(h=e.getStyleNode("road"),r.setAttribute("aria-label",h.displayName),r.querySelector("div.".concat("mapTypeLabel")).innerHTML=h.displayName):(r.setAttribute("aria-label",o.displayName),r.querySelector("div.".concat("mapTypeLabel")).innerHTML=o.displayName),r.querySelector("div.".concat("mapTypeIcon")).style.backgroundImage="url(".concat(o.thumbnail,")")):r.classList.add("hidden")}t._adjustIcons();t._adjustDetails();t._commonHandler=new it("bingStyleControl",t,i,!0,t._clickHandler);t._disposables.push(f.add(n,"idle",function(){return t._bessAvailable()}),f.add(n,"stylechanged",function(){return t._adjustIcons()}))}),i},e.prototype.onRemove=function(){var t;this._container&&((t=this._commonHandler)===null||t===void 0?void 0:t.dispose());u._clearDisposables(this._disposables);u._nullifyClass(this);n.prototype.onRemove.call(this)},e.prototype.dispose=function(){this.onRemove()},e.prototype._toggleRoadLabels=function(n){for(var t,r,u=this.map._mbMap,e=n?"visible":"none",o=u.getStyle().layers,i=0,f=o;i<f.length;i++)t=f[i],r=t.id.toLowerCase(),(t.source==="bing-mvt"&&r.indexOf("landmark")>-1||r.indexOf("lmk_3d")===0)&&u.setLayoutProperty(t.id,"visibility",e)},e.prototype._toggleBElabels=function(n){for(var r,u=this.map._mbMap,f=n?"visible":"none",e=this.map.layers.getLayerById("labels").layers,o=this.map.layers.getLayerById("roads").layers,s=ft(ft([],o,!0),e,!0),t=0,i=s;t<i.length;t++)r=i[t],u.setLayoutProperty(r.id,"visibility",f)},e.prototype._switchStyle=function(n,t,i){var u=this,e=this.map.getCamera(),o={bounds:e.bounds},r=n&&n.getAttribute("data-mapStyle")||i;r!=="streetside"&&this._ssAvailable(o).then(function(){u._ssControl.toggleCoverage(!1)});r==="birdseye"?this._beAvailable(e).then(function(n){if(n){var i=function(){t||u._toggleBElabels(!1)};u._beControl.activate();f.addOnce(u.map,"stylechanged",function(){i()})}}):r==="streetside"?(this._ssAvailable(o).then(function(){u._ssControl.toggleCoverage()}),this._ssControl.getCoverage().autoCoverage(!0),this._container.querySelector("#navbarLabelToggleInput").checked=!0):(r==="road"||r==="roaddark"?t||f.addOnce(this.map,"stylechanged",function(){u._toggleRoadLabels(!1)}):(r==="hybrid"||r==="aerial")&&(r=t?"hybrid":"aerial"),this.map.setStyle({style:r}))},e.prototype._adjustDetails=function(n){var t=this._container.querySelector("#navbarLabelToggleInput"),r=this._container.querySelector(".".concat("labelToggleSlot"));n||(n=this.map.getStyle().style,t.checked=n!=="aerial");n==="ordnancesurvey"||n==="road"&&i.DeviceInfo.renderingMode===2?(t.disabled=!0,r.classList.add("disabled")):(t.disabled=!1,r.classList.remove("disabled"))},e.prototype._adjustIcons=function(){var t=this.map.getStyle().style,r,i,u,n;for(t==="hybrid"&&(t="aerial"),this._container.querySelector("#".concat("bingStylePickerIcon")).style.backgroundImage="url(".concat(e.getStyleNode(t).thumbnail,")"),r=this._container.querySelectorAll("#".concat("bingStylePicker"," .slot")),i=0;i<r.length;i++)u=r[i],n=u.classList,n.contains("hidden")||(n.contains(t)?n.add("selected"):n.remove("selected"))},e.prototype._bessAvailable=function(){var u=this,n=this.map.getCamera(),i=function(n,t,i){var f="div[id='".concat("bingStylePicker","'] .slot.").concat(n),r=u._container.querySelector(f);r&&(t?(r.classList.remove("disabled"),r.removeAttribute("title")):(r.classList.add("disabled"),r.setAttribute("title",i)))},r;this._beAvailable(n).then(function(n){i("birdseye",n,t.L_No_BE_Images)});r={bounds:n.bounds};this._ssAvailable(r).then(function(n){i("streetside",n,t.L_No_SS_Images)})},e.prototype._beAvailable=function(n){var i=this,t,r;return this._beControl?t=this._beControl.isBirdseyeAvailable(n.center,n.bearing):this._shell?(r=function(){return i._shell.getBirdseyeControl().then(function(t){return i._beControl=t,t.isBirdseyeAvailable(n.center,n.bearing)})},t=this._shell.getAzureMap().pltEX.then(function(){return r()})):t=Promise.resolve(!1),t},e.prototype._ssAvailable=function(n){var i=this,t,r;return this._ssControl?t=this._ssControl.isStreetsideAvailable(n):this._shell?(r=function(){return i._shell.getStreetsideControl().then(function(t){return i._ssControl=t,t.isStreetsideAvailable(n)})},t=this._shell.getAzureMap().pltEX.then(function(){return r()})):t=Promise.resolve(!1),t},e.prototype._setSSCoverage=function(n){var t=this;this._ssControl?this._ssControl.getCoverage().autoCoverage(n):this._shell&&this._shell.getStreetsideControl().then(function(i){t._ssControl=i;i.getCoverage().autoCoverage(n)})},e.getStyleNode=function(n){return r.mapStyleDefinition.styles.find(function(t){return t.name===n})},e}(atlas.control.ControlBase),ri=function(){function n(n,t){this._map=n;this._options=t;this._disposables=[];this._isDisposed=!1}return n.prototype.getOptions=function(){return this._options},n.prototype.dispose=function(){u._clearDisposables(this._disposables);this._map=null;this._options=null;this._isDisposed=!0},n}(),ki=function(t){function i(i){var r=t.call(this,i)||this;return r._startObservingStyleChange=function(){r._disposables.push(f.add(r._map,"stylechanged",function(){r._displayDelayedLayers()}))},r._mapLoaded=function(){r._tilePrimerInstance&&!n.mockEnabled&&r._tilePrimerInstance.unWrap();r._displayDelayedLayers();r._map.mapLoaded.resolve();nt.log("Maps_VDTTG")},r._updateRasterLayerFadeProperty=function(){var n=r._mapbox.getStyle().layers,t=n.filter(function(n){return n.type==="raster"&&n.id.startsWith("microsoft.bing.maps.")});t.forEach(function(n){r._mapbox.setPaintProperty(n.id,"raster-fade-duration",75)})},r._tilePrimerInstance=window.mapsTilePrimerObj,r._mapbox=i._getMap(),r._map.mapReady.then(function(){nt.setStartTime("Maps_VDTTG",!0);r._init()}),r._map.mapLoaded.then(function(){r._updateRasterLayerFadeProperty();r._disposables.push(f.add(i,"stylechanged",function(){r._updateSource();f.addOnce(i,"idle",r._updateRasterLayerFadeProperty)}))}),r}return c(i,t),i.prototype.dispose=function(){t.prototype.dispose.call(this);this._mapbox=null},i.prototype._init=function(){var n=this,t=this._map;f.addOnce(t,"idle",this._mapLoaded);this._map.mapLoaded.then(function(){n._startObservingStyleChange()});this._updateSource()},i.prototype._displayDelayedLayers=function(){var n,i,t;for(this._map.setLayoutProperty("microsoft.bing.maps.base.land","visibility","visible"),n=0,i=this._mapbox.getStyle().layers;n<i.length;n++)t=i[n],t.metadata&&t.metadata.delayLoad&&this._map.setLayoutProperty(t.id,"visibility","visible")},i.prototype._updateSource=function(){var n=this._mapbox.getStyle(),u=(n===null||n===void 0?void 0:n.sources)||{},t,i,r;for(t in u)i=u[t],i.type==="raster"&&i.roundZoom===!1&&(r=this._mapbox.getSource(t),r&&(r.roundZoom=!1))},i}(ri),di=function(){function n(){}return n.prototype.enqueue=function(n){var t={action:n,enqueuePromise:new et,next:null};return this._head?(this._tail.next=t,this._tail=t):this._head=this._tail=t,this._isExecuting||this._execute(),t.enqueuePromise},n.prototype._execute=function(){var t=this,n=this._head,i;n?(this._isExecuting=!0,i=function(){n.enqueuePromise.resolve();t._head=n.next;t._execute()},n.action().then(i)):this._isExecuting=!1},n}(),lt;(function(n){function t(n){var t;return n&&(t=n.id,typeof t!="number"||isNaN(t)||(t=t+""),t||(t=n.properties.id)),t}var i=function(){function n(n,t){this._id=t;this._mbSource=n&&n.getSource(t);this._internals=new Map}return n.prototype.getId=function(){return this._id},n.prototype.clear=function(){this._internals.clear();this._updateMBSource()},n.prototype.removeByIds=function(n){var i,t,r,u,f;if(n&&(i=Array.isArray(n)?n:[n],i.length>0)){for(t=0,r=i;t<r.length;t++)u=r[t],f=u.trim(),f&&this._internals.delete(u);this._updateMBSource()}},n.prototype.getFeatureById=function(n){var t=null,i=n===null||n===void 0?void 0:n.trim();return i&&(t=this._internals.get(i)),t},n.prototype.getFeatureCollection=function(){var n=Array.from(this._internals.values());return{type:"FeatureCollection",features:n}},n.prototype.addOrUpdate=function(n,i){var f,e,r,o,u,s;if(n&&(i||(i=t),f=Array.isArray(n)?n:[n],f.length>0)){for(e=!1,r=0,o=f;r<o.length;r++)u=o[r],s=u&&i(u),s&&(this._internals.set(s,u),e=!0);e&&this._updateMBSource()}},n.prototype.setFeatures=function(n,t){this._internals.clear();this.addOrUpdate(n,t)},n.prototype.dispose=function(){this._mbSource&&this.clear();this._mbSource=null},n.prototype._updateMBSource=function(){if(this._mbSource){var n=this.getFeatureCollection();this._mbSource.setData(n)}},n}();n.GeoJSONSourceManager=i})(lt||(lt={}));ui=function(){function n(n,t,i){this.handler=n;this._interval=t;this._eventFilter=i;this._nextScheduledEventId=null}return n.prototype.invoke=function(n){var i=this,t;this._isScheduled()?(this._eventFilter&&(n=this._eventFilter(this._nextScheduledEventArgs,n)),this._nextScheduledEventArgs=n):(t=Date.now(),this._lastRaisedTime&&this._lastRaisedTime<t+this._interval?(this._nextScheduledEventArgs=n,this._nextScheduledEventId=a.setTimeout(function(){i._raiseScheduledEvent()},this._lastRaisedTime+this._interval-t)):(this.handler(n),this._lastRaisedTime=t))},n.prototype.dispose=function(){this._clearScheduledEvent()},n.prototype._raiseScheduledEvent=function(){this.handler(this._nextScheduledEventArgs);this._lastRaisedTime=Date.now();this._clearScheduledEvent()},n.prototype._isScheduled=function(){return this._nextScheduledEventId!==null},n.prototype._clearScheduledEvent=function(){this._isScheduled()&&(clearTimeout(this._nextScheduledEventId),this._nextScheduledEventId=null)},n}();w=function(){function n(){this.reset()}return n.prototype.add=function(n,t){var i=this;return t===void 0&&(t=!1),t?this._handlers.splice(0,0,n):this._handlers.push(n),{dispose:function(){return i.remove(n)}}},n.prototype.addOne=function(n,t,i){if(t===void 0&&(t=!1),i===void 0&&(i=!1),i&&this.isPreviouslyInvoked)return n(this.lastInvokedArgs),null;var r=this.add(function(t){r.dispose();n(t)},t);return r},n.prototype.addThrottled=function(n,t,i){var r=this;return this._throttledEventInvokers.push(new ui(n,t,i)),{dispose:function(){return r._removeThrottledEventHandler(n)}}},n.prototype.remove=function(n){for(var t=this._handlers.length;t--;)if(this._handlers[t]===n){this._handlers.splice(t,1);return}},n.prototype.invoke=function(n){var f,t,r,e,o,i,u,s;for(this.lastInvokedArgs=n,this.isPreviouslyInvoked=!0,f=this._handlers.slice(0),t=0,r=f;t<r.length;t++)e=r[t],e(n);for(o=this._throttledEventInvokers.slice(0),i=0,u=o;i<u.length;i++)s=u[i],s.invoke(n)},n.prototype.hasHandlersRegistered=function(){return this._handlers.length+this._throttledEventInvokers.length>0},n.prototype.isHandlerRegistered=function(n){return this._handlers.some(function(t){return n===t})||this._throttledEventInvokers.some(function(t){return n===t.handler})},n.prototype.dispose=function(){this._handlers=[];u._clearDisposables(this._throttledEventInvokers);this.lastInvokedArgs=null},n.prototype.reset=function(){this._throttledEventInvokers?u._clearDisposables(this._throttledEventInvokers):this._throttledEventInvokers=[];this._handlers=[];this.isPreviouslyInvoked=!1;this.lastInvokedArgs=null},n.prototype._removeThrottledEventHandler=function(n){for(var t=this._throttledEventInvokers.length;t--;)if(this._throttledEventInvokers[t].handler===n){this._throttledEventInvokers[t].dispose();this._throttledEventInvokers.splice(t,1);return}},n}(),function(n){function r(t,i,r,u){return typeof u!="number"&&(u=512),n.getZoomFromMetersPerPixel(r?0:t[1],i,u)}function f(i,r,u,f){var e;return f===void 0&&(f=256),e=n.latlongToPixelXY(i[1],i[0],r,f),u&&(e.x+=u.x,e.y+=u.y),t(e)}function t(n,t){t===void 0&&(t=256);var i=Math.floor(n.x/t),r=Math.floor(n.y/t);return{x:i,y:r}}function e(n,t){t===void 0&&(t=256);var i=n.x*t,r=n.y*t;return{x:i,y:r}}function o(n,t,r){r===void 0&&(r=256);var f=i(t,r),e=u._clamp(n.x,0,f-1)/f-.5,o=.5-u._clamp(n.y,0,f-1)/f,s=90-360*Math.atan(Math.exp(-o*2*Math.PI))/Math.PI,h=360*e;return[h,s]}function s(n,t,i){for(var f="",r,u=i;u>0;u--)r=1<<u-1,f+=(n&r?1:0)+(t&r?2:0);return f}function i(n,t){return t===void 0&&(t=256),t<<n}n.fromScale=r;n.tileXYFromLocation=f;n.pixelXYToTileXY=t;n.tileXYToPixelXY=e;n.pixelXYToLatLong=o;n.quadkeyFromTileXY=s;n.mapSizeFromLOD=i}(rt||(rt={})),function(t){function g(n){y===-1&&(y=a.setTimeout(function(){var t,u,o,n,f;y=-1;var h=Date.now(),e=!1,i=s,c=Object.keys(r);for(t=0,u=c;t<u.length;t++)o=u[t],n=r[o],(n===null||n===void 0?void 0:n.status)===1&&(f=n.timeoutDuration-(h-n.startTime),f<=0?n.abortCallback(null,5):(i=Math.min(i,f),e=!0));e&&g(i)},Math.max(ft,n)))}function ot(n){var r=n.toLowerCase(),t=n;return i.ClientApi&&i.ClientApi.length>0&&(r.indexOf("dev.virtualearth.net/rest")>-1||r.indexOf("dev.ditu.live.com/rest")>-1)&&(t+=n.indexOf("?")>-1?"&":"?",t+="clientApi="+encodeURIComponent(i.ClientApi)),t}function l(n,t){return n+b+t}function st(n){var i,r,t;return n&&(t=n.toString().split(b),t.length===1?i=t[0]:(r=t[0],i=t[1])),{requestId:i,callbackId:r}}function h(t){var i=n.dynamicProperties;return t.replace("{srcparam}",n.tileSourceParam?"&src=".concat(n.tileSourceParam):"").replace("{credentials}",i.sessionKey).replace("{cmnPltParam}",n.platformCommonParam)}function tt(n,t,r){var u=i.logger,f;n=n||{};u&&(r||n.status===3||n.status===5)&&(f={feature:"NW",action:"ERR",data:{httpStatus:""+(t||""),status:""+n.status,cid:n.callerId||"",url:n.url||"",msg:r||""}},u.logCriticalError(null,f))}function f(t,i,u,f){var e=r[i],y,s,p,rt,l,w,b,c,v,k,h;if(!e||n.networkJsonpFix&&e.status===4&&e.isJsonpRequest){o[i]===i&&(y="XsrPrefetchCallback",o[y]?o[y](t,i):o[i]=t);delete r[i];return}e.abortCallback=null;e.status=f||2;e.scriptElement&&e.scriptElement.parentNode&&e.scriptElement.parentNode.removeChild(e.scriptElement);e.scriptElement=null;i!==e.url&&(n.networkJsonpFix&&e.status===4&&e.isJsonpRequest||delete r[i]);delete r[e.url];s=e.status===2;s&&typeof u!="undefined"&&(s=u>=200&&u<300,s||(e.status=3));s&&e.parseResponseCallback&&u!==204&&(p=e.parseResponseCallback(t),s=p.succeeded,s||(e.status=3),t=p.response);var d=e.successCallbacks,g=e.callbackStates,it=e.errorCallbacks;if(e.successCallbacks={},e.callbackStates={},e.errorCallbacks={},s)try{for(e.logKey&&(rt=Date.now()-e.startTime,nt.record(e.logKey,rt)),c=Object.keys(d),l=0,w=c;l<w.length;l++)h=w[l],b=d[h],b&&b(t,g[h])}catch(a){if(Microsoft.Maps.logger)Microsoft.Maps.logger.logCriticalError(a);else throw a;}else try{for(tt(e,u),c=Object.keys(it),v=0,k=c;v<k.length;v++)h=k[v],it[h](g[h],e.status)}catch(a){if(Microsoft.Maps.logger)Microsoft.Maps.logger.logCriticalError(a);else throw a;}}function ht(n,t){f(t,n)}function it(n,t,i,r,u){var e=d(),h=null,s,o,c;if(n.abortCallback=function(n,t){h=t;e.abort()},e.onreadystatechange=function(){if(u&&u(e),e.readyState===4&&e.status!==0){var t=e.response||e.responseText;f(t,n.sourceUrl,e.status,2)}},e.onabort=function(){return f(null,n.sourceUrl,null,h)},e.open("GET",n.url),r&&(e.withCredentials=!0),i)for(s=Object.keys(i),o=0,c=s.length;o<c;o++)e.setRequestHeader(s[o],i[s[o]]);return t&&(e.responseType=t),e}function ct(n,t,i){var r=new AbortController,u={method:"GET",headers:t,credentials:i?"include":"same-origin",signal:r.signal};return n.abortCallback=function(n,t){r.abort(t)},new Request(n.url,u)}function lt(n){for(var t=parseInt(u._getHash(n),16),i=r[t.toString(16)];i&&i.sourceUrl!==n;)t++,i=r[t.toString(16)];return t.toString(16)}function v(t,i,u,f,e,o,h,c,l,a,v,y,p){i=ot(i);var w=r[i];return g(s),w||(w={sourceUrl:t,url:i,status:0,successCallbacks:{},errorCallbacks:{},parseResponseCallback:o,callbackStates:{},jsonso:v,callerId:c,startTime:Date.now(),timeoutDuration:a,logKey:y,referrerPolicy:p,isJsonpRequest:!!v},v&&(r[v]=w),r[i]=w),w.successCallbacks[l]=u,f&&(w.errorCallbacks[l]=f),h&&(w.callbackStates[l]=h),w.status===0&&(w.status=1,e(w),n.testHooksEnabled&&console.log("Network request: ".concat(w.url))),w}function at(n,t,i,u,e,o,a,y){n=h(n);var p=(c++).toString(),w=l(p,n),b=function(n){var t=it(n,u?u:"text",null,null,a);t.send()};return v(n,n,i,e,b,null,o,t,p,s,null,y),r[n].abortCallback=function(t,i){f(null,n,null,i)},w}function vt(n,t,i,r,u,e){n=h(n);var o=(c++).toString(),a=l(o,n),y=function(n){var t=ct(n);fetch(t).then(function(t){f(t,n.sourceUrl,t.status,2)}).catch(function(){var i=t.signal,r=i.aborted?i.reason:3;f(null,n.sourceUrl,null,r)})};return v(n,n,i,r,y,null,u,t,o,s,null,e),a}function yt(n,t,i,u,e,o,a,y,p,w){var b,k,d,g;return y===void 0&&(y=!0),n=h(n),b=(c++).toString(),k=l(b,n),p=p||{},y&&!p["Content-Type"]&&(p["Content-Type"]="application/json; charset=utf-8"),d=function(n){var t=it(n,null,p,o);t.send()},g=function(n){var t={succeeded:!1};try{t.response=JSON.parse(n);t.succeeded=!0}catch(i){}return t},v(n,n,i,u,d,g,e,t,b,s,null,w),r[n].abortCallback=function(t,i){f(null,n,null,i)},k}function pt(n,i,u,a,y,b,d,g,nt,it){var kt,ft,at,vt,yt,ot,st,dt,gt,ht,pt;n=h(n);var ct=!0,wt=(c++).toString(),bt=n;return y=y||lt(bt),kt=l(wt,y),n.indexOf(w)<0&&(ct=!1),at=!1,/\{jsonso}/ig.test(n)?(ft=b?ut:k,n=n.replace(/\{jsonso}/ig,y)):n.indexOf(p)>=0?(vt=n.indexOf(p),vt>=0&&(ot=n.indexOf("&",vt),ot<0&&(ot=n.length),st=vt+p.length,y=n.substr(st,ot-st))):(ct||(yt=n.indexOf("jsonp="),yt>=0&&(ot=n.indexOf("&",yt),ot<0&&(ot=n.length),st=yt+6,ft=n.substr(st,ot-st))),ft||(ft="f"+y),at=!0),ct&&(dt=rt+ft,n=n.replace(w,dt)),gt=function(n){et(n)},ht=v(bt,n,u,a,gt,null,d,i,wt,s,y,nt,it),at&&(e[y]?e[y]++:e[y]=1,pt=r[y],ct?t.callbacks[ft]=function(n,i,r,u){u!==4&&u!==3&&(e[y]-=Object.keys(pt.successCallbacks).length);f(n,y,r,u);e[y]===0&&(delete t.callbacks[ft],delete e[y])}:o[ft]=function(n,t,i,r){r!==4&&r!==3&&(e[y]-=Object.keys(pt.successCallbacks).length);f(n,y,i,r);e[y]===0&&(delete o[ft],delete e[y])}),ht&&ht===r[y]?ht.abortCallback=function(n,i){var r=o[ft]?o[ft]:t.callbacks[at?ft:k];r&&r(null,y,i===3?500:504,i)}:tt(ht,0,"downloadJsonp mismatch"),kt}function wt(n){var u,t,f,i;n&&(u=st(n),t=r[u.requestId],t&&(f=Object.keys(t.successCallbacks).length,i=u.callbackId,t.successCallbacks[i]&&(f>1?(t.errorCallbacks[i]&&t.errorCallbacks[i](t.callbackStates[i],4),delete t.errorCallbacks[i],delete t.callbackStates[i],delete t.successCallbacks[i]):t.abortCallback&&t.abortCallback(null,4))))}function bt(n,t,i){var f,o,c,e,l,a;n=h(n);var r=d(),v=i.headers||{},u=i.onError||function(){},y=i.onSuccess||function(){},p=n;if(i.queryParameters)for(n.indexOf("?")<0&&(n+="?"),f=0,o=Object.keys(i.queryParameters);f<o.length;f++)c=o[f],n+="&"+encodeURIComponent(c)+"="+encodeURIComponent(i.queryParameters[c]);for(r.open("POST",n,!0),r.timeout=s,r.ontimeout=u,e=0,l=Object.keys(v);e<l.length;e++)a=l[e],r.setRequestHeader(a,v[a]);r.onabort=u;r.onerror=u;r.onreadystatechange=function(){r.readyState===4&&(r.status===200?y(r.responseText):u(r.responseText,r.status,r.statusText))};r.send(t)}var r={},e={},c=0,y=-1,o=window,rt=o.$MicrosoftMaps8.toString()+".NetworkCallbacks.",w="{callback}",b="~DispatchKey~",p="jsonso=",k="normal",ut="reverse",s=25e3,ft=1e3,d=function(){var n=null,t=i.Internal.originalXMLHttpRequest;return typeof t!="undefined"?n=new t:typeof ActiveXObject!="undefined"&&(n=new ActiveXObject("Microsoft.XMLHTTP")),n},et=function(n){var t=document.createElement("script");t.type="text/javascript";t.src=n.url;t.async=!0;t.onerror=function(){a.setTimeout(function(){n.abortCallback&&n.abortCallback(null,3)},0)};n.scriptElement=t;n.referrerPolicy&&(t.referrerPolicy=n.referrerPolicy);document.getElementsByTagName("head")[0].appendChild(t)};t.callbacks={normal:f,reverse:ht};t.downloadGeneric=at;t.fetchGeneric=vt;t.downloadJson=yt;t.downloadJsonp=pt;t.abortRequest=wt;t.doPost=bt}(y||(y={}));var gi=function(){function n(){}return n.prototype.toString=function(n,t){var i="",e,o,r,s,u,f;if(this.protocol&&(i+=this.protocol+":",(this.protocol==="http"||this.protocol==="https"||this.protocol==="ftp")&&(i+="//")),this.host&&(i+=this.host),this.port&&(i+=":"+this.port),this.path&&(i+="/"+this.path),this.queryStringParameters)for(e=!0,o=Object.keys(this.queryStringParameters),r=0,s=o.length;r<s;r++)(u=o[r],f=this.queryStringParameters[u],!t||f)&&(e?(i+="?",e=!1):i+="&",i+=n?u+"="+f:encodeURIComponent(u)+"="+encodeURIComponent(f));return this.fragment&&(i+="#"+encodeURI(this.fragment)),i},n.fromString=function(t){var h,f,e,o,c,l,s;if(!t)throw new Error("Input should be a well-formed url");var u=new n,r=t,i=r.split("#");if(i.length>2)throw new Error("More than one fragment is found in the input");if(i.length===2&&(r=i[0],u.fragment=decodeURIComponent(i[1])),i=r.split("?"),i.length>2)throw new Error("More than one query param identifier ('?') is found in the input");if(i.length===2)for(r=i[0],u.queryStringParameters={},h=i[1],i=h.split("&"),f=0;f<i.length;f++)e=i[f],o=e.indexOf("="),o>0&&(c=decodeURIComponent(e.substring(0,o)),l=decodeURIComponent(e.substring(o+1)),u.queryStringParameters[c]=l);if(i=r.split("://"),i.length>2)throw new Error("More than one protocol identifier ('://') is found in the input");if(i.length===2&&(r=i[1],u.protocol=i[0]),i=r.split("/"),i.length>1&&(r=i[0],u.path=i.slice(1).join("/")),r.indexOf("@")>=0)throw new Error("Unsupported url");if(i=r.split(":"),i.length>2)throw new Error("More than one port identifier (':') is found in the input");if(u.host=i[0],i.length===2){if(s=parseInt(i[1]),isNaN(s))throw new Error("port number should be an integer");u.port=s}return u},n.prototype.protocolAndDomain=function(){return(this.protocol+"://"+this.host+(typeof this.port=="undefined"?"":":"+this.port)).toLowerCase()},n}(),fi=function(){function n(n,t){this._capacity=n;this._count=0;this._dictionary={};this._removeCallback=t}return n.prototype.addItem=function(n,t,i){if(t){var r=this._dictionary[n];r?u.areValuesEqual(r.item,t)||(this._dictionary[n].item=t,this._moveNodeToHead(r)):this._addNewItem(n,t,i)}},n.prototype.convertToArray=function(){for(var t=[],n=this._headNode;n;)t.push(n.item),n=n.next;return t},n.prototype.getItem=function(n){var t,i=this._dictionary[n];return i?(t=i.item,this._moveNodeToHead(i)):t=null,t},n.prototype.clear=function(){while(this._count>0)this._deleteTailNode()},n.prototype.getCount=function(){return this._count},n.prototype.getInternalDictionary=function(){return this._dictionary},n.prototype.removeItem=function(n,t){var i=this._dictionary[n];i&&(this._removeNode(i),delete this._dictionary[n],this._count--,t&&this._disposeNode(i))},n.prototype.setCapacity=function(n){var i,t;if(n>0){if(this._capacity>n&&this._count>n)for(i=this._count-n,t=0;t<i;t++)this._deleteTailNode();this._capacity=n}},n.prototype.getCapacity=function(){return this._capacity},n.prototype._addNewItem=function(n,t,i){this._count===this._capacity&&(i?this._capacity++:this._deleteTailNode());var r={key:n,item:t};this._count===0?this._headNode=this._tailNode=r:(r.next=this._headNode,this._headNode.previous=r,this._headNode=r);this._dictionary[n]=r;this._count++},n.prototype._removeNode=function(n){if(this._count===1){this._headNode=null;this._tailNode=null;return}var t=n.previous,i=n.next;t?t.next=i:this._headNode=i;i?i.previous=t:this._tailNode=t},n.prototype._moveNodeToHead=function(n){n!==this._headNode&&(this._removeNode(n),this._headNode&&(this._headNode.previous=n),n.previous=null,n.next=this._headNode,this._headNode=n)},n.prototype._deleteTailNode=function(){if(this._tailNode){var n=this._tailNode;this._removeNode(n);delete this._dictionary[n.key];this._count--;this._disposeNode(n)}},n.prototype._disposeNode=function(n){var t=n.item;this._removeCallback&&this._removeCallback(n.key,n.item);t&&t.dispose&&t.dispose();Array.isArray(t)&&u._clearDisposables(t)},n}(),l=function(){function n(n,t,i){this.x=n;this.y=t;this.z=i}return n.prototype.add=function(t){return this.z&&t.z?new n(this.x+t.x,this.y+t.y,this.z+t.z):new n(this.x+t.x,this.y+t.y)},n.prototype.subtract=function(t){return this.z&&t.z?new n(this.x-t.x,this.y-t.y,this.z-t.z):new n(this.x-t.x,this.y-t.y)},n.prototype.clone=function(){return new n(this.x,this.y,this.z)},n.prototype.equals=function(t,i){return n.pointsEqual(this,t,i)},n.pointsEqual=function(n,t,i){return n&&t?i>0?Math.abs(n.x-t.x)<=i&&Math.abs(n.y-t.y)<=i:n.x===t.x&&n.y===t.y&&n.z===t.z:!1},n.prototype.toString=function(){return typeof this.z=="undefined"?"[Point ("+this.x+", "+this.y+")]":"[Point ("+this.x+", "+this.y+", "+this.z+")]"},n.prototype.scalarMultiply=function(t){return new n(this.x*t,this.y*t,this.z?this.z*t:null)},n.prototype.invert=function(){return new n(-this.x,-this.y,this.z?-this.z:null)},n}(),nr=function(n){function t(t,i,r){r===void 0&&(r=1);var u=n.call(this,t,i)||this;return u.units=r,u}return c(t,n),t}(l),u;(function(u){function rt(){return it++}function ut(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,i=n==="x"?t:t&3|8;return i.toString(16)})}function et(n){var u,i,f,s,r,e,o,t;if(n)if(Array.isArray(n)){for(u=n,i=0,f=u;i<f.length;i++)t=f[i],t&&t.dispose&&t.dispose();u.length=0}else for(s=Object.keys(n),r=0,e=s;r<e.length;r++)o=e[r],t=n[o],t&&t.dispose&&t.dispose(),delete n[o]}function ot(n){var u,i,r,t;if(n)for(u=Object.keys(n),i=0,r=u;i<r.length;i++)t=r[i],n[t]instanceof w&&(n[t].dispose&&n[t].dispose(),delete n[t])}function v(n){return typeof Array.isArray=="function"?Array.isArray(n):Object.prototype.toString.call(n)==="[object Array]"}function ht(n){var e,t,u,i,r,f;if(n)for(e=Object.keys(n),t=0,u=e;t<u.length;t++)i=u[t],r=n[i],r&&(f=typeof r,f!=="function"&&(v(r)?n[i]=[]:f==="object"&&(n[i]=null)))}function ct(n,t){return typeof n=="number"&&isFinite(n)||(n=t),n}function lt(n,t,i){return Math.min(Math.max(n,t),i)}function c(t,i){return t.toFixed(i).replace(".",n.dynamicProperties.cultureData.numberDecimalSeparator)}function y(n,t,i){i===void 0&&(i=!0);var u=typeof n=="string"?new URL(n):new URL(n.href),r=u.searchParams.get(t)||"";return i?decodeURIComponent(r):r}function at(){var n=parseFloat(y(window.location,"dpr"));return n||window.devicePixelRatio||1}function vt(n){for(var r=0,t=0,i=0;i<n.length;i++)r+=n.charCodeAt(i)<<t,t++,t>6&&(t=0);return r.toString(16)}function yt(n,t){if(n===t)return!0;if(!n||!t||n.length!==t.length)return!1;for(var i=n.length-1;i>=0;){if(n[i]!==t[i])return!1;--i}return!0}function o(n,t,i){var u,a,f,e,s,c,h,l,r;if(n===t)return!0;if(typeof n!=typeof t)return!1;if(Array.isArray(n)&&Array.isArray(t)){if(n.length||t.length){if(n.length!==t.length)return!1}else return!0;for(u=0,a=n.length;u<a;u++)if(!o(n[u],t[u],i))return!1;return!0}if(typeof n=="object"&&n&&t&&n.constructor===Object&&t.constructor===Object){for(f=n,e=t,s=0,c=Object.keys(f);s<c.length;s++)if((r=c[s],!i||!(i.indexOf(r)>=0))&&!o(f[r],e[r],i))return!1;for(h=0,l=Object.keys(e);h<l.length;h++)if((r=l[h],!i||!(i.indexOf(r)>=0))&&!o(f[r],e[r],i))return!1;return!0}return n===t}function pt(n,t,i,r){return r=r||0,n&&t&&Math.abs(n.latitude-t.latitude)<=r&&Math.abs(n.longitude-t.longitude)<=r&&(i||n.altitudeReference===-1&&t.altitudeReference===-1||n.altitudeReference===t.altitudeReference&&Math.abs(n.altitude-t.altitude)<=r)}function wt(n,t){return n&&n.length===4?t===1?[n[1],n[2],n[3],n[0]]:[n[3],n[0],n[1],n[2]]:n}function bt(n){var i=n,t;return n&&(t=document.createElement("textarea"),t.innerHTML=n,i=t.value),i}function dt(n){return n.replace("{tfeDomainDynamic}",r.tfeDomainDynamic).replace("{tfeDomainStatic}",r.tfeDomainStatic)}function ri(){function n(){return((1+Math.random())*65536|0).toString(16).substr(1)}return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()}function ui(t){return n&&n.features[t]&&n.features[t].isEnabled}function fi(n){var t=n.charAt(n.length-1),i=parseInt(t)%2;return isNaN(i)||(t=i.toString()),t}function ei(n){for(var i,r={},u=n,e=r,t=0,f=Object.keys(u);t<f.length;t++)i=f[t],e[i]=u[i];return r}function oi(n,t){if(t){var i=1/t;n=Math.round(n*i)/i}return n}function si(n){var u,t=r.mapStyleDefinition,i;return t&&(n==="v"?n="a":n==="x"&&(n="r"),i=t.styles.find(function(t){return t.styleKey===n}),u=i?i.name:t.defaultStyle),u}function k(n){var u,t=r.mapStyleDefinition,i;return t&&(i=t.styles.find(function(t){return t.name===n}),u=i?i.styleKey:k(t.defaultStyle)),u}function d(n,t){return n[t]}function g(n,t,i,r){var f,o;r===void 0&&(r=d);for(var s=r(t,i),u=0,e=n.length;e>u;)f=(u+e)/2|0,o=r(n[f],i),o<=s?u=f+1:e=f;return u}function hi(n,t,i,r){r===void 0&&(r=d);var u=g(n,t,i,r);return n.splice(u,0,t),u}function f(n){for(var t,i,f=[],r=1;r<arguments.length;r++)f[r-1]=arguments[r];if(n&&f){var e=/\d+/g,u=n.match(/{\d+}/g);if(u)for(t=0;t<u.length;t++)i=f[Number(u[t].match(e)[0])],(i===null||typeof i=="undefined")&&(i=""),n=n.replace(u[t],i)}return n}function h(n,t,i){var r=t+t;return n.indexOf(r)<0?n.replace(t,i):n.replace(r,(i<10?"0":"")+i)}function ci(t,i,r,u,f){var o=n.dynamicProperties.cultureData,e,c,s,h;switch(t){case"d":i>3?e=o.dayNames[u?r.getUTCDay():r.getDay()]:i===3?e=o.abbreviatedDayNames[u?r.getUTCDay():r.getDay()]:(c=u?r.getUTCDate():r.getDate(),e=(c<10&&i>1?"0":"")+c);break;case"M":s=u?r.getUTCMonth():r.getMonth();i>3?(o.monthGenitiveNames&&!f&&(e=o.monthGenitiveNames[s]),e&&e.length||(e=o.monthNames[s])):i===3?(o.abbreviatedMonthGenitiveNames&&!f&&(e=o.abbreviatedMonthGenitiveNames[s]),e&&e.length||(e=o.abbreviatedMonthNames[s])):(++s,e=(s<10&&i>1?"0":"")+s);break;case"y":h=u?r.getUTCFullYear():r.getFullYear();i>2?e=h.toString():(h%=100,e=(h<10&&i>1?"0":"")+h);break;default:e=""}return e}function e(t,i,r,u){for(var e,v=n.dynamicProperties.cultureData,o=[],s=-1,h=i.length,f=0;f<h;f++){var l=i.charAt(f),c="'/dMyg".indexOf(l),a=c>=0;if(s<0&&!a&&(s=f),s>=0&&(a||f===h-1)&&(o.push(i.substring(s,a?f:f+1)),s=-1),c===0){for(e=f+1;e<h&&i.charAt(e)!=="'";e++);o.push(i.substring(f+1,e));f=e}else if(c===1)o.push(v.dateSeparator);else if(c>1){for(e=f+1;e<h&&i.charAt(e)===l;e++);o.push(ci(l,e-f,t,r,u));f=e-1}}return o.join("")}function li(t,i){return e(t,n.dynamicProperties.cultureData.shortDatePattern,i)}function ai(t){return e(t,n.dynamicProperties.cultureData.longDatePattern)}function vi(t){var i=n.dynamicProperties.cultureData.longDatePattern;return i=i.replace("dddd","ddd"),i=i.replace("MMMM","MMM"),e(t,i)}function yi(t){return e(t,n.dynamicProperties.cultureData.yearMonthPattern,!1,!0)}function pi(t){return e(t,n.dynamicProperties.cultureData.weekMonthDayPattern)}function wi(n,i){i===void 0&&(i=!1);var e=i?Math.ceil(n/60):Math.round(n/60),r=e%60,u=Math.floor(e/60);return u===0?f(t.L_Duration_Min,r):r===0?f(t.L_Duration_NoMin,u):f(t.L_Duration,u,r)}function bi(n){return n>12?n-=12:n||(n=12),n}function l(t,i,r){var f=n.dynamicProperties.cultureData,e,o,u=f.shortTimePattern,s=u.indexOf("H")<0;return s?(o=t>=12,t=bi(t),e="h"):e="H",u=h(u,e,t),u=h(u,"m",i),u=h(u,"s",r),s&&(u=u.replace("tt",o?f.pmDesignator:f.amDesignator)),u.replace(/:/g,f.timeSeparator)}function ki(n){return l(n.getHours(),n.getMinutes(),n.getSeconds())}function nt(n){return l(n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds())}function tt(n){var t=n&&n.match(/\((\d+)([-,+]?)(\d{2})?(\d{2})?\)/),i;if(t&&t[1]&&(i=parseInt(t[1],10),t[2]&&t[3]&&t[4])){var f=t[2]==="-"?-1:1,r=parseInt(t[3],10),u=parseInt(t[4],10);isNaN(r)||isNaN(u)||(i+=f*(r*60+u)*6e4)}return i}function di(n){return nt(new Date(tt(n)))}function gi(){return typeof _G!="undefined"}function nr(){return typeof _G=="object"&&_G&&_G.RTL}function tr(n){for(var t=n&&n.lastChild;t;)n.removeChild(t),t=n.lastChild}function ir(n,t){if(n&&n!==16777215&&n!==4294967295){for(var i=n.toString(16);i.length<6;)i="0"+i;return i.length===8&&(i=i.substr(2)),"#"+i}return t||""}function rr(n){var t=(n&16711680)>>16,i=(n&65280)>>8,r=n&255;return(t*.299+i*.587+r*.114)/256}function ur(i,r,e,o){var s,h=1,c=i>=50&&e;return i=i&&c?Math.round(i):i,r?i<.1?(i*=1e3,s=t.L_DistanceUnitMeters_Text,h=0):s=t.L_DistanceUnitKm_Text:i<.1?(i*=5280,s=t.L_DistanceUnitFeetShort_Text,h=0):s=n.features.directions.bestModeEnabled&&o?t.L_DistanceUnitMilesLongText_Text:t.L_DistanceUnitMilesShortText_Text,f(t.L_Distance_Format,u._toFixed(i,c?0:h),s)}function fr(n,i){return f(t.L_LatLon_Format,c(n,6),c(i,6))}function er(t,i,r,f){var c,o,h;r===void 0&&(r=2e3);f===void 0&&(f=1200);var l=225,a=parseInt(u._getUrlParam(window.location,"v9maxDuration"));f=a?a:f;c=parseInt(u._getUrlParam(window.location,"v9velocity"));r=c?c:r;o=Math.abs(t.bearing-i.bearing);o=isNaN(o)?0:o;h=Math.abs(t.zoom-i.zoom);h=isNaN(h)?0:h;var v=Math.min(t.zoom,i.zoom),y=s(s({},t),{zoom:v}),p=s(s({},i),{zoom:v}),w=y.center&&p.center?u.pixelDistance(y,p):0,b=w+h*500+o*4,e=b/r*1e3;return e?e>f?n.forcedTransition?{type:n.forcedTransition,duration:f}:{type:"jump"}:(e<l&&(e=Math.min(e*10,l)),{type:"ease",duration:e}):{type:"jump"}}function or(n,t){var i=st.mercatorPositionsToPixels([n.center],n.zoom)[0],r=st.mercatorPositionsToPixels([t.center],t.zoom)[0],u=Math.pow(p.getX(i)-p.getX(r),2)+Math.pow(p.getY(i)-p.getY(r),2);return Math.sqrt(u)}function sr(n,t,i){var r=n.positionsToPixels([t.center,i.center]),u=r[0],f=r[1],e=Math.pow(p.getX(u)-p.getX(f),2)+Math.pow(p.getY(u)-p.getY(f),2);return Math.sqrt(e)}function hr(n,t){var i,r,u;if(typeof n!="string"||typeof t!="string")return NaN;var o=n.split("."),s=t.split("."),f=o.length,e=s.length;if(!f||!e)return NaN;for(i=0;i<f;i++){if(e===i)return 1;if(r=parseInt(o[i],10),u=parseInt(s[i],10),isNaN(r)||isNaN(u))return NaN;if(r!==u)return r>u?1:-1}return f!==e?-1:0}function cr(n){var t,i,r;return n&&(t=n.split(","),t.length===2&&(i=parseFloat(t[0]),r=parseFloat(t[1]),isFinite(i)&&isFinite(r)))?b.Position.fromLatLng(r,i):null}function lr(n,t){return t===1?n-1:n+1}function a(n){function u(n){return n&&typeof n=="object"&&!Array.isArray(n)}for(var f,h,e,s,t,o,i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];if(!i.length||!u(n))return n;if(f=i.shift(),u(f))for(h=Object.keys(f),e=0,s=h;e<s.length;e++)t=s[e],o=f[t],u(o)?(u(n[t])||(n[t]={}),a(n[t],o)):n[t]=o;return a.apply(void 0,ft([n],i,!1))}function ar(n){var t=r.mapStyleDefinition||n.getServiceOptions().styleSet,i=n.getStyle().style.toLowerCase();return t.styles.find(function(n){return n.name.toLowerCase()===i})||t.styles.find(function(n){var t;return n.name.toLowerCase()===((t=r.mapStyleDefinition)===null||t===void 0?void 0:t.defaultStyle.toLowerCase())})}function vr(n,t){var r=document.createElement("canvas"),i=r.getContext("2d");return i.font=t,i.measureText(n).width}function yr(n){var t=i.TrafficExperiences;t&&t.logMsnCfv(n)}function pr(n,t,i){var r;return function(){for(var e,o,f=[],u=0;u<arguments.length;u++)f[u]=arguments[u];e=function(){r=undefined;i||n.apply(void 0,f)};o=i&&!r;clearTimeout(r);r=setTimeout(e,t);o&&n.apply(void 0,f)}}function wr(){var t;return n.isMapsAnswer&&!((t=n.dynamicProperties)===null||t===void 0?void 0:t.isMapsOverlay)}function br(){var t;return n.isMapsAnswer&&((t=n.dynamicProperties)===null||t===void 0?void 0:t.isMapsOverlay)||!1}function kr(t,i,u,f,e){var l,a;t===void 0&&(t=!0);i===void 0&&(i=!0);u===void 0&&(u="all");f===void 0&&(f="list");e===void 0&&(e=null);var o=n.enableDarkMode?atlas.ControlStyle.dark:atlas.ControlStyle.light,h=atlas.control,c={mapStyles:u,layout:f,autoSelectionMode:!1,style:o},s=[];i&&(l=r.bingStylePicker?new ii(e,c):new h.StyleControl(c),s.push(l));t&&(a=new kt({style:o,geochain:"expanded"}),s.push(a));var v=r.bingStylePicker?gt:h.CompassControl,y=r.bingStylePicker?ni:h.PitchControl,p=r.bingStylePicker?ti:h.ZoomControl;return s.push(new p({style:o,zoomDelta:1})),r.isRasterMode||s.push(new v({style:o,rotationDegreesDelta:15}),new y({style:o,pitchDegreesDelta:10})),s}var it=0;u._nextId=rt;u._createUUID=ut;u._clearDisposables=et;u._disposeEvents=ot;u._isArray=v;u._nullifyClass=ht;u._getFinite=ct;u._clamp=lt;u._toFixed=c;u._getUrlParam=y;u._getDpr=at;u._getHash=vt;u.areArraysEqual=yt;u.areValuesEqual=o;u.areLocationsEqual=pt;u.convertMapBoundsOrder=wt;u._decodeHTML=bt;u._updateTfeUrlDomain=dt;u._generateRandomKey=ri;u._isFeatureEnabled=ui;u._getTileSubDomain=fi;u._copyObject=ei;u.roundToInterval=oi;u.getAzureMapStyleFromMapType=si;u.getMapTypeFromMapStyle=k;u._getInsertionIndex=g;u._orderedInsert=hi;u._formatString=f;u._format2Digit=h;u._formatShortDateString=li;u._formatLongDateString=ai;u._formatAbbrevLongDateString=vi;u._formatYearMonthString=yi;u._formatWeekMonthDayString=pi;u._formatDurationString=wi;u._formatShortTimeString=l;u._formatTimeString=ki;u._formatUTCTimeString=nt;u._getTime=tt;u._getTimeString=di;u._hasBingHeaders=gi;u._isRtl=nr;u.clearElement=tr;u._formatHexColorString=ir;u._calcLuminance=rr;u._formatDistanceString=ur;u._formatLatLonString=fr;u.computeAnimation=er;u.pixelDistance=or;u.screenPixelDistance=sr;u.compareVersions=hr;u.parseLatLong=cr;u.convertZoom=lr;u.mergeDeep=a;u.getMapStyle=ar;u.getTextWidth=vr;u.logMsnCfv=yr;u.debounce=pr;u._isSmallMapShownOnSerp=wr;u._isMapsOverlay=br;u.constructCommonControls=kr})(u||(u={}));ei=function(){function n(n,t){this.minPoint=n;this.maxPoint=t}return n.empty=function(){return new n(null,null)},n.fromPoints=function(){for(var e,c,i,a=[],r=0;r<arguments.length;r++)a[r]=arguments[r];var h=(u._isArray(arguments[0])?arguments[0]:arguments)||[],t=Number.MAX_VALUE,f=t,o=-t,s=-f;for(e=0,c=h.length;e<c;e++)(i=h[e],i)&&(t=Math.min(t,i.x),f=Math.min(f,i.y),o=Math.max(o,i.x),s=Math.max(s,i.y));return t===Number.MAX_VALUE?n.empty():new n(new l(t,f),new l(o,s))},n.fromSides=function(t,i,r,u){var f=Math.min(t,i),e=Math.max(t,i),o=Math.min(r,u),s=Math.max(r,u),h=new l(f,o),c=new l(e,s);return new n(h,c)},n.prototype.clone=function(){var t=this.minPoint&&this.minPoint.clone(),i=this.maxPoint&&this.maxPoint.clone();return new n(t,i)},n.prototype.equals=function(n,t){if(n){var i=this.isEmpty(),r=n.isEmpty();return i&&r?!0:i||r?!1:t>0?this.minPoint.equals(n.minPoint,t)&&this.maxPoint.equals(n.maxPoint,t):this.minPoint.equals(n.minPoint)&&this.maxPoint.equals(n.maxPoint)}return!1},n.prototype.getCorners=function(){var n=this.minPoint.x,t=this.maxPoint.x,i=this.minPoint.y,r=this.maxPoint.y;return[new l(n,i),new l(t,i),new l(t,r),new l(n,r)]},n.prototype.getSize=function(){return this.isEmpty()?new vt(0,0):new vt(this.maxPoint.x-this.minPoint.x,this.maxPoint.y-this.minPoint.y)},n.prototype.getCenter=function(){return this.isEmpty()?null:{x:(this.minPoint.x+this.maxPoint.x)/2,y:(this.minPoint.y+this.maxPoint.y)/2}},n.prototype.buffer=function(n,t){this.minPoint.x=this.minPoint.x-n;this.minPoint.y=this.minPoint.y-t;this.maxPoint.x=this.maxPoint.x+n;this.maxPoint.y=this.maxPoint.y+t;var i;this.minPoint.x>this.maxPoint.x&&(i=this.minPoint.x,this.minPoint.x=this.maxPoint.x,this.maxPoint.x=i);this.minPoint.y>this.maxPoint.y&&(i=this.minPoint.y,this.minPoint.y=this.maxPoint.y,this.maxPoint.y=i)},n.prototype.intersect=function(n){return this.intersects(n)?(this.minPoint=new l(Math.max(this.minPoint.x,n.minPoint.x),Math.max(this.minPoint.y,n.minPoint.y)),this.maxPoint=new l(Math.min(this.maxPoint.x,n.maxPoint.x),Math.min(this.maxPoint.y,n.maxPoint.y))):this.minPoint=this.maxPoint=null,this},n.prototype.intersects=function(n){return!this.isEmpty()&&!n.isEmpty()&&this.minPoint.x<=n.maxPoint.x&&this.minPoint.y<=n.maxPoint.y&&this.maxPoint.x>=n.minPoint.x&&this.maxPoint.y>=n.minPoint.y},n.prototype.isEmpty=function(){return!this.minPoint||!this.maxPoint},n.prototype.isInside=function(n){return!this.isEmpty()&&!n.isEmpty()&&this.minPoint.x>=n.minPoint.x&&this.minPoint.y>=n.minPoint.y&&this.maxPoint.x<=n.maxPoint.x&&this.maxPoint.y<=n.maxPoint.y},n.prototype.pointInRect=function(n){return!this.isEmpty()&&n.x>=this.minPoint.x&&n.x<=this.maxPoint.x&&n.y>=this.minPoint.y&&n.y<=this.maxPoint.y},n.prototype.union=function(n){return n.isEmpty()||(this.isEmpty()?(this.minPoint=n.minPoint.clone(),this.maxPoint=n.maxPoint.clone()):(this.minPoint.x=Math.min(this.minPoint.x,n.minPoint.x),this.minPoint.y=Math.min(this.minPoint.y,n.minPoint.y),this.maxPoint.x=Math.max(this.maxPoint.x,n.maxPoint.x),this.maxPoint.y=Math.max(this.maxPoint.y,n.maxPoint.y))),this},n.prototype.unionPoint=function(n){return this.isEmpty()?(this.minPoint=n.clone(),this.maxPoint=n.clone()):(this.minPoint.x=Math.min(this.minPoint.x,n.x),this.minPoint.y=Math.min(this.minPoint.y,n.y),this.maxPoint.x=Math.max(this.maxPoint.x,n.x),this.maxPoint.y=Math.max(this.maxPoint.y,n.y)),this},n}(),function(n){function t(t,i){var u=n,o,r,f,e;for(u[t]||(u[t]={}),o=u[t],r=0,f=Object.keys(i);r<f.length;r++)e=f[r],o[e]=i[e]}n.init=t,function(){var r=i.ResourcesObject,n,u,f;if(r){for(n=0,u=Object.keys(r);n<u.length;n++)f=u[n],t(f,r[f]);delete i.ResourcesObject}}()}(at||(at={}));var tr=at,vt=function(){function n(n,t){this.width=n;this.height=t}return n.Auto=new n(-1,-1),n}(),k,oi=function(){function t(n){this._boundsCache=new fi(100);this._pendingIds=[];this._reverseGeocoder=n}return t.prototype.getGeochain=function(i,r,u,f,e,o){var p=this,s,c,l,a,v;if((!i||!n.disableReverseGeocode)&&(u||(u=i.getCamera().center),f||(s=i.getCamera().bounds,f=h.fromEdges(s[0],s[3],s[2],s[1])),!this._lastCenterPoint||!this._lastBoundingRect||!b.Position.areEqual(this._lastCenterPoint,u)||o)){if(this._lastCenterPoint=u,this._lastBoundingRect=f,!e)for(c=0,l=this._pendingIds;c<l.length;c++)a=l[c],y.abortRequest(a);v=this._reverseGeocoder.reverseGeocode(u,function(n){p._reverseGeocoderCallback(i,n,f,e,r,o)},t._geochainEntityTypes,!0,1);e||(this._pendingIds=[v])}},t._getBoundingBox=function(t,i,r){var u=tt.boundingBoxRequestUrlFormat.replace("{session_key}",n.dynamicProperties.sessionKey).replace("{culture}",n.dynamicProperties.market).replace("{query}",t);y.downloadJsonp(u,"geochain",r,null,null,null,i,3)},t.prototype._reverseGeocoderCallback=function(n,i,r,u,f,e){var h=this,o,w,b,a,v,y,k;if(u||(this._pendingIds=[]),i.success){if(o=t._parseReverseGeocoderResponse(i,e),!o){f([]);return}var c=e?o.neighborhood:null,l=e?t._geochainLevelZoomLimits.city:null,p=t._generateBoundsQueries(o),s=p.length;for(s===0&&(w=this._constructGeochainFromBounds(n,r,o,l),f(w,c)),b=function(i){var e;if(!i.id||a._boundsCache.getItem(i.id))return s--,s===0&&(u||(a._pendingIds=[]),e=a._constructGeochainFromBounds(n,r,o,l),f(e,c)),"continue";var v="ValidCredentials",y=200,p=function(t,i){var a,e;t&&t.authenticationResultCode===v&&t.statusCode===y&&t.resourceSets&&t.resourceSets.length>0&&t.resourceSets[0].resources&&t.resourceSets[0].resources.length>0?(a=t.resourceSets[0].resources[0],i&&a.bbox&&h._boundsCache.addItem(i,a.bbox),s--,s===0&&(u||(h._pendingIds=[]),e=h._constructGeochainFromBounds(n,r,o,l),f(e,c))):(s--,s===0&&(u||(h._pendingIds=[]),e=h._constructGeochainFromBounds(n,r,o,l),f(e,c)))};t._getBoundingBox(i.query,i.id,p)},a=this,v=0,y=p;v<y.length;v++)k=y[v],b(k)}},t._parseReverseGeocoderResponse=function(n,t){var o=n.results?n.results.length:0,i,u,f,r,e;if(o===0)return null;for(i={},u=0;u<o;u++)if(r=n.results[u].address,e=n.results[u].entityType,e!=="Neighborhood"){i.country=r.countryRegion;i.countryEntityId=r.countryRegionEntityId;i.state=r.adminDistrict;i.stateEntityId=r.adminDistrictEntityId;i.county=r.adminDistrict2;i.countyEntityId=r.adminDistrict2EntityId;i.city=r.locality;i.cityEntityId=r.localityEntityId;i.street=r.addressLine;i.streetEntityId=r.addressLineEntityId;break}for(f=0;f<o;f++)if(r=n.results[f].address,e=n.results[f].entityType,e==="Neighborhood"){i.country=r.countryRegion;i.countryEntityId=r.countryRegionEntityId;i.state=r.adminDistrict;i.stateEntityId=r.adminDistrictEntityId;t?(i.city=r.locality,i.cityEntityId=r.localityEntityId):(i.county=r.adminDistrict2,i.countyEntityId=r.adminDistrict2EntityId);i.neighborhood=r.neighborhood;i.neighborhoodEntityId=r.neighborhoodEntityId;break}return i},t._generateBoundsQueries=function(n){var i=[],t="",r,u,f;return n.country&&(t+="&countryRegion="+n.country,r=t,i.push({query:r,id:n.countryEntityId}),n.state&&(t+="&adminDistrict="+n.state,u=t,i.push({query:u,id:n.stateEntityId}),n.county&&n.city&&(t+="&adminDistrict2="+n.county+"&locality="+n.city,f=t,i.push({query:f,id:n.cityEntityId})))),i},t.prototype._constructGeochainFromBounds=function(n,i,r,u){var e=u||n.getCamera().zoom,l=[],o,f,a,h,s;if(typeof e!="number"||isNaN(e))return l;for(e=Math.ceil(e),o=-1,f=0;f<t._geochainLevels.length;f++){var s=t._geochainLevels[f],c=null,v=r[s+"EntityId"];if(v&&(c=this._boundsCache.getItem(v)),c)if(t._canFitViewport(c,i)){t._comparableToViewport(c,i)&&(o=f);break}else o=f;else if(a=t._geochainLevelZoomLimits[s],a>=e){if(a<e+2){o=f;break}}else o=f}for(h=0;h<=o;h++)s=t._geochainLevels[h],r[s]&&l.push(new ir(r[s],r[s+"EntityId"],h));return l},t._comparableToViewport=function(n,t){if(!n||!t)return!1;var i=h.fromEdges(n[1],n[0],n[3],n[2]),r=Math.min(h.getWidth(t)/4,h.getHeight(t)/4);return h.getWidth(i)>=r||h.getHeight(i)>=r},t._canFitViewport=function(n,t){if(!n||!t)return!1;var i=h.fromEdges(n[1],n[0],n[3],n[2]);return!(h.getWidth(i)>h.getWidth(t)||h.getHeight(i)>h.getHeight(t))},t._geochainEntityTypes=["Neighborhood","PopulatedPlace","AdminDivision1","AdminDivision2","CountryRegion"],t._geochainLevels=["country","state","county","city","neighborhood"],t._geochainLevelZoomLimits=(k={},k.country=4,k.state=7,k.county=10,k.city=13,k.neighborhood=15,k),t}(),ir=function(){function n(n,t,i){this.displayName=n;this.entityId=t;this.index=i}return n}(),rr=function(){function t(){}return t.prototype.geocode=function(t,i,r,u,f,e){function p(n){return n?h.getSouth(n)+","+h.getWest(n)+","+h.getNorth(n)+","+h.getEast(n):""}var s="ValidCredentials",c=200,l="OK",o={success:!1,statusCode:null,authenticationResultCode:null,statusDescription:null,name:t,results:null},a,v;location||i(o);a=u&&u<=20?u:5;v=tt.geocodeRequestUrlFormat.replace("{session_key}",n.dynamicProperties.sessionKey);var w=v.replace("{query}",encodeURIComponent(t)).replace("{culture}",n.dynamicProperties.market).replace("{userMapView}",p(r)).replace("{maxResults}",a).replace("{neighborhood}",f?"1":"0").replace("{incl}",e?"ciso2":""),b=function(n){var t,u,r;if(n&&n.authenticationResultCode===s&&n.statusCode===c&&n.statusDescription===l&&n.resourceSets&&n.resourceSets.length!==0){for(o.success=!0,o.statusCode=c,o.authenticationResultCode=s,o.statusDescription=l,t=0,u=n.resourceSets.length;t<u;t++)if(r=n.resourceSets[t].resources,r&&r.length!==0){o.results=r;break}o.traceId=n.traceId}else n?(o.statusCode=n.statusCode,o.authenticationResultCode=n.authenticationResultCode,o.statusDescription=n.statusDescription,o.errorMessage=n.errorDetails&&n.errorDetails.length>0&&n.errorDetails[0],o.traceId=n.traceId):(o.statusCode=400,o.authenticationResultCode="Unknown",o.statusDescription="Unknown");i(o)},k=function(){o.authenticationResultCode="Unknown";o.statusCode=404;o.statusDescription="Http Error";i(o)};y.downloadJsonp(w,"geocode",b,k,null,null)},t}(),si=function(){function t(n,t){this._window=n;this._reverseGeocoder=t;this._fetchingPosition=!1}return t.prototype.GetCurrentPosition=function(n){var i=this,t,r,u;n&&n.callback&&(t={success:!1,statusCode:200,authenticationResultCode:"ValidCredentials",statusDescription:"OK",location:null,addressList:null,results:null,position:null,error:{code:4,message:"Unknown Error"}},this._window.navigator&&this._window.navigator.geolocation?this._fetchingPosition?(t.error.code=5,t.error.message="Try again later",n.callback(t)):(n.timeout=n.timeout?n.timeout:tt.geolocationTimeout,n.maximumAge=n.maximumAge?n.maximumAge:tt.geolocationMaxAge,n.enableHighAccuracy=!0,this._fetchingPosition=!0,r=function(r){t.success=!0;t.position=r;t.location=b.Position.fromLatLng(r.coords.longitude,r.coords.latitude,r.coords.altitude);t.error=null;i._fetchingPosition=!1;n.performReverseGeocoding&&i._reverseGeocoder?i._reverseGeocoder.reverseGeocode(t.location,function(i){t.addressList=i.success&&i.addressList?[i.addressList[0]]:[];n.callback(t)}):n.callback(t);i._logData(t)},u=function(r){t.error.code=r.code;t.error.message=r.message;i._fetchingPosition=!1;n.callback(t);i._logData(t)},this._window.navigator.geolocation.getCurrentPosition(r,u,n)):(t.error.code=6,t.error.message="Geolocation not supported by browser",n.callback(t)))},t.prototype._logData=function(n){var r,u;!this._hasLogged&&n&&(u={feature:"LM",action:"IN",data:t._createLogData(n)},(r=i.logger)===null||r===void 0?void 0:r.logObject(u),this._hasLogged=!0)},t._createLogData=function(t){var r=t.success,u="NaN,NaN",f=NaN,e=-1,i;return r&&t.position&&t.position.coords?(i=t.position.coords,u=i.latitude+","+i.longitude,f=i.accuracy):e=t.error.code,{success:r,errorCode:e,clientIP:n.dynamicProperties.clientIP,reverseIPLocation:n.dynamicProperties.reverseIPLocation,geolocation:u,geolocationAccuracy:f}},t}(),hi=function(){function t(){this.unknown="Unknown"}return t.prototype.reverseGeocode=function(n,t,i,r,u){var f=this,e,o;return n||t(this._getEmptyResponse()),n[0]=st.normalizeLongitude(n[0]),e=this.getReverseGeocoderUrl(n,!0,i,r,u),o=function(){var i=f._getEmptyResponse(n);i.authenticationResultCode=f.unknown;i.statusCode=404;i.statusDescription="Http Error";t(i)},y.downloadJsonp(e,"revgeocode",function(i){t(f.parseReverseGeocodeResponse(i,n))},o,null,null)},t.prototype.getReverseGeocoderUrl=function(t,i,r,u,f){i===void 0&&(i=!0);var e=tt.reverseGeocodeRequestUrlFormat.replace("{session_key}",n.dynamicProperties.sessionKey).replace("{culture}",n.dynamicProperties.uiLanguage).replace("{includeEntityTypes}",r?r.join(","):"").replace("{neighborhood}",u?"1":"0").replace("{incl}",this._getIncludeOptionString(f)).replace("{cmnPltParam}",n.platformCommonParam);return i||(e=e.replace("{callback}","")),t&&(e=e.replace("{latitude}",t[1].toString()).replace("{longitude}",t[0].toString())),e},t.prototype.getFirstFormattedAddress=function(n){var t,i=this.parseReverseGeocodeResponse(n);return((t=i.addressList)===null||t===void 0?void 0:t.length)>0?i.addressList[0].formattedAddress:""},t.prototype.parseReverseGeocodeResponse=function(n,t){var i=this._getEmptyResponse(t),f="ValidCredentials",e=200,o="OK",r,s,u;if(n&&n.authenticationResultCode===f&&n.statusCode===e&&n.statusDescription===o&&n.resourceSets&&n.resourceSets.length!==0){for(i.success=!0,i.statusCode=e,i.authenticationResultCode=f,i.statusDescription=o,r=0,s=n.resourceSets.length;r<s;r++)if(u=n.resourceSets[r].resources,u&&u.length!==0){i.addressList=[];i.results=[];u.forEach(function(n){var t=n.address;t&&t.formattedAddress&&(i.addressList.push(t),i.results.push(n))});break}i.traceId=n.traceId}else n?(i.statusCode=n.statusCode,i.authenticationResultCode=n.authenticationResultCode,i.statusDescription=n.statusDescription,i.errorMessage=n.errorDetails&&n.errorDetails.length>0&&n.errorDetails[0],i.traceId=n.traceId):(i.statusCode=400,i.authenticationResultCode=this.unknown,i.statusDescription=this.unknown);return i},t.prototype._getIncludeOptionString=function(n){switch(n){case 0:return"ciso2";case 1:return"entityId";default:return""}},t.prototype._getEmptyResponse=function(n){return{success:!1,statusCode:null,location:n,authenticationResultCode:null,statusDescription:null,addressList:null,results:null}},t}(),nt=function(){function t(i){var u=this;this._logStatus={};this._totalMapMoves=0;this._totalMapResizeEvents=0;this._disposables=[];this._dwellTimeMarkerIds=[];this.onVisibilityChangeHandler=function(){document.hidden?t._mapPausedStart=performance.now():t._mapPausedStart>-1&&(t._mapPausedDuration+=performance.now()-t._mapPausedStart,t._mapPausedStart=-1)};this._onMapIdle=function(){var e,i,r,n,f;for(u._isViewChanging&&(e=u._map.getCamera(),i=performance.now()-u._moveEndTime,u._isUserInteration&&(e.zoom!==u._cameraAtMoveStart.zoom?t.record("Maps_ZTTG",i):t.record("Maps_PTTG",i)),t.record("Maps_VCTTG",i)),u._isViewChanging=u._isUserInteration=!1,r=Object.keys(t._logStartKey),n=0;n<r.length;n++)f=t._logStartKey[r[n]],f.logOnRenderComplete&&t.log(r[n],f.startTime);u._tryLogPLTex();t.tryFlush()};this._onUserInteractionStart=function(){u._isUserInteration=!0};this._onMapRender=function(){var n,t;u._totalTicks++;n=performance.now();u._totalTicks>0&&(t=n-u._previousTickTimestamp,u._maxTimeBetweenTicks=Math.round(Math.max(u._maxTimeBetweenTicks,t)),u._droppedFrameCount+=t>40?1:0);u._previousTickTimestamp=n};this._onMapMoveEnd=function(){var n;if(u._totalMapMoves++,u._moveEndTime=performance.now(),n=u._previousTickTimestamp-u._moveStartTime,u._totalTicks>0&&n>100){var e=u._map.getCamera(),i=Math.round(u._totalTicks/(n/1e3)),r=100*u._droppedFrameCount/u._totalTicks,f={FPS:i,longestFrame:u._maxTimeBetweenTicks,droppedPercent:r.toFixed(2)+"%"};e.zoom!==u._cameraAtMoveStart.zoom?(t.record("Maps_ZDFP",r),t.record("Maps_ZFPS",i),t.record("Maps_ZLF",u._maxTimeBetweenTicks),f.type="zoom"):(t.record("Maps_PDFP",r),t.record("Maps_PFPS",i),t.record("Maps_PLF",u._maxTimeBetweenTicks),f.type="pan");d.setLastMoveStat(f)}t.setStartTime("MoveEnd",!1)};this._onMapMoveStart=function(){u._cameraAtMoveStart=u._map.getCamera();u._moveStartTime=u._previousTickTimestamp=performance.now();u._droppedFrameCount=0;u._maxTimeBetweenTicks=0;u._totalTicks=-1;u._isViewChanging=!0};t._instance=this;this._map=i;this._totalTicks=0;this._logBST();this._setControlStartTime();n.isMapsVertical&&this._logDwellTimeMarker();i.mapReady.then(function(){u._onMapReady();u._disposables.push(f.add(i,"idle",u._onMapIdle))});this._disposables.push(f.addOnce(i,"idle",function(){return u._onFirstMapIdle()}),f.add(i,"movestart",this._onMapMoveStart),f.add(i,"render",this._onMapRender),f.add(i,"moveend",this._onMapMoveEnd),f.add(i,"mousedown",this._onUserInteractionStart),f.add(i,"wheel",this._onUserInteractionStart),f.add(i,"touchstart",this._onUserInteractionStart),f.add(i,"resize",function(){u._totalMapResizeEvents++}));r.pageVisibilityLogging&&this.initVisibilityChange()}return t.tryFlush=function(){(n.enableInstrumentation||t._perfInclusions.length>0)&&((n.isMapsVertical||n.isMapsAnswer)&&typeof perf!="undefined"&&!!perf.flush?perf.flush():d.tryFlush())},t.record=function(i,r){var u=typeof r=="number";if(u&&r&&n.isOnCorpnet)try{performance.measure(i,{start:performance.now()-r})}catch(f){}r=u?Math.round(r):r;n.testHooksEnabled&&console.log("".concat(Date.now()-performance.timeOrigin," - PerfV2 key:").concat(i," Value:").concat(r));(n.enableInstrumentation||t._perfInclusions.indexOf(i.toLowerCase())>-1)&&(u&&t._logPASMetrics(i,r),i==="Maps_CLT"&&(i=n.isMapsAnswer?"Maps_CLTserpV9":n.isMsftPartner?"Maps_CLTmeV9":"Maps_CLTseV9"),(n.isMapsVertical||n.isMapsAnswer)&&typeof perf!="undefined"&&!!perf.record?perf.record(i,r):d.record(i,r))},t.mark=function(i,r){if(performance.measure&&performance.measure(i),n.testHooksEnabled&&console.log("PerfV2 key:".concat(i," Value:").concat(r?r:performance.now())),n.enableInstrumentation||t._perfInclusions.indexOf(i.toLowerCase())>-1){r=(r||performance.now())-t._mapPausedDuration;var u=void 0;window.performance&&(u=Math.round(performance.timeOrigin+r));(n.isMapsVertical||n.isMapsAnswer)&&typeof perf!="undefined"&&!!perf.mark?perf.mark(i,u):d.mark(i,u);t._logPASMetrics(i,r)}},t.removeKey=function(n){delete t._logStartKey[n]},t.setStartTime=function(n,i,r){t._startWatchForActiveKeys();t._logStartKey[n]={startTime:Math.round(r||Date.now()),includeinPLTex:i}},t.getStartTime=function(n,i){var r=t._logStartKey[n]&&typeof t._logStartKey[n].startTime=="number"?t._logStartKey[n].startTime:0;return i&&t.removeKey(n),r},t.log=function(n,i){var r=t._instance,u=t._logStartKey[n],f;i=i||t.getStartTime(n,!0);t.removeKey(n);u&&u.includeinPLTex&&r&&r._tryLogPLTex();i>0&&(f=Math.round(Date.now()-i),t.record(n,f))},t.logAfterRenderComplete=function(n,i,r){var u=t._logStartKey[n];u?(i&&(u.startTime=i),r&&(u.includeinPLTex=r)):t.setStartTime(n,r,i);t._logStartKey[n].logOnRenderComplete=!0;t._startWatchForActiveKeys()},t.getLogKeyFromUrl=function(n){var t=null;return n&&(n.indexOf("localoverlaybfpr?")>-1?t="Maps_lobfpr":n.indexOf("localpoioverlaybfpr?")>-1?t="Maps_lpobfpr":n.indexOf("overlaybfpr?")>-1?t="Maps_obfpr":n.indexOf("landmarkdeals?")>-1&&(t="Maps_lmd")),t},t.prototype.dispose=function(){var n,i,r;if(this._map){for(this._map=null,t.tryFlush(),u._clearDisposables(this._disposables),clearTimeout(this._timerId),clearTimeout(t._keyExpiredTimerId),t._keyExpiredTimerId=-1,n=0,i=this._dwellTimeMarkerIds;n<i.length;n++)r=i[n],clearTimeout(r);t._instance=null;this._isPLTexLogged=!1;t._logStartKey={};this._logStatus={}}},t._logPASMetrics=function(n,i){if(t._PASLoggingKeys.indexOf(n)>-1){var r=i||performance.now()-t.getStartTime("CtrlLoadStart");t._pasPageTimingsLog[n]=Math.round(r)}},t.prototype.initVisibilityChange=function(){var i=this,n,r=f.addOnce(this._map,"idle",function(){n.dispose();document.removeEventListener("visibilitychange",i.onVisibilityChangeHandler)});n=f.add(this._map,"render",function(){document.hidden&&t._mapPausedStart>-1&&(r.dispose(),n.dispose(),document.removeEventListener("visibilitychange",i.onVisibilityChangeHandler),t._mapPausedDuration=0)});this.onVisibilityChangeHandler(null);document.addEventListener("visibilitychange",this.onVisibilityChangeHandler);this._disposables.push(n,r)},t.prototype._onMapReady=function(){this._logStatus.Maps_READY||(t.mark("Maps_READY"),this._logStatus.Maps_READY=!0)},t.prototype._onFirstMapIdle=function(){if(t.mark("Maps_PLT"),t.mark("Maps_PLT_V9"),t.record("Maps_MovePLTex",this._totalMapMoves),t.record("Maps_resizePLT",this._totalMapResizeEvents),this._logPPLT(),this._logDiagnosticsInfo(),this._logResourceData(),this._logNavigationData(),!n.isMapsVertical){var i=performance.now()-t.getStartTime("CtrlLoadStart");t.record("Maps_CLT",i)}this._tryLogLandingLOD()},t.prototype._logBST=function(){this._logStatus.Maps_BST||(t.mark("Maps_BST"),this._logStatus.Maps_BST=!0)},t.prototype._logPPLT=function(){var i=window.mapsTilePrimerObj,n;i&&(n=i.tilePrimerLoadTime,n&&!this._logStatus.Maps_PPLT&&(t.record("Maps_PPLT",Math.round(n)),this._logStatus.Maps_PPLT=!0))},t.prototype._logDiagnosticsInfo=function(){var u=i.DeviceInfo,f=u.cpuCores,e;typeof f=="number"&&t.record("Maps_CPUCORE",f);t.record("Maps_GPU",u.deviceClassification);t.record("Maps_RM",u.renderingMode);t.record("Maps_DPR",window.devicePixelRatio||1);t.record("Maps_SlowP",r.isSlowPartner?1:0);t.record("Maps_Bot",n.dynamicProperties.likelyBot?1:0);r.deviceClassifierV2!=="v1"?(u.gpuRendererHash&&t.record("Maps_GPURH",u.gpuRendererHash),t.record("Maps_GPUR",u.gpuRenderer),t.record("Maps_GL2",u.webgl2Supported?1:0)):u.gpuRenderer&&(e=u.gpuRenderer.replaceAll(",",".").replaceAll(":","."),t.record("Maps_GPUR",e))},t.prototype._logResourceData=function(){var ht=this,d;if(!this._logStatus.resourceData&&typeof performance!="undefined"){if(this._logStatus.resourceData=!0,performance.getEntriesByType){var rt=performance.getEntriesByType("resource"),g=0,ut=0,r=0,ft=0,u=0,f=0,e=0,o=0,s=0,h=0,c=0,l=0,v=0,y=0,p=0,w=0,b=0,k=0,ct=n.isOnChina?"tiles.ditu.":"tiles.virtualearth.net";for(d=0;d<rt.length;d++){var i=rt[d],nt=i.name?i.name.toLowerCase():"",et=Math.floor(i.domainLookupEnd-i.domainLookupStart),ot=Math.floor(i.connectEnd-i.connectStart),st=Math.floor(i.secureConnectionStart>0?i.connectEnd-i.secureConnectionStart:0),tt=Math.floor(i.responseStart-i.requestStart),it=i.responseStart>0?Math.floor(i.responseEnd-i.responseStart):0;nt.indexOf(ct)>-1?(c=Math.max(et,c),l=Math.max(ot,l),v=Math.max(st,v),y=Math.max(tt,y),w=Math.max(it,w),i.transferSize&&(ut+=i.transferSize,r=i.responseEnd-i.responseStart)):t.rmsUrlIdentifier.test(nt)?(e=Math.max(et,e),o=Math.max(ot,o),s=Math.max(st,s),h=Math.max(tt,h),k=Math.max(it,k),i.encodedBodySize&&(u++,ft+=i.encodedBodySize),i.transferSize&&(f++,g+=i.transferSize,r=i.responseEnd-i.responseStart)):nt.indexOf("/stl?")>-1&&(p=Math.max(tt,p),b=Math.max(it,b))}u>0&&(t.record("Maps_CM",Math.round(f/u*100)),t.record("Maps_ERS",ft),t.record("Maps_TRS",g),r>0&&t.record("Maps_Nspeed",Math.round((ut+g)/r)),f===0&&t.mark("Maps_PLT2"),f===u&&t.mark("Maps_PLT1"));e&&t.record("Maps_BDNST",e);o&&t.record("Maps_BCT",o);s&&t.record("Maps_BSSLT",s);h&&t.record("Maps_BTTFB",h);k&&t.record("Maps_BDT",k);c&&t.record("Maps_TSDNST",c);l&&t.record("Maps_TSCT",l);v&&t.record("Maps_TSSSLT",v);y&&t.record("Maps_TSTTFB",y);p&&t.record("Maps_XSRTTFB",p);b&&t.record("Maps_XSRDT",b);w&&t.record("Maps_TSDT",w)}this._logMemory("Maps_MEM");this._timerId=a.setTimeout(function(){ht._logMemory("Maps_LMEM")},126e4)}},t.prototype._logNavigationData=function(){var r,i;n.isMapsVertical&&!this._logStatus.navigationData&&typeof performance!="undefined"&&(this._logStatus.navigationData=!0,performance.getEntriesByType&&(r=performance.getEntriesByType("navigation"),r&&r.length>0&&(i=r[0],i&&(t.record("Maps_NTS",i.transferSize/1024),t.record("Maps_NDCLT",i.domContentLoadedEventStart),t.record("Maps_NTTFB",i.responseStart-i.requestStart),t.record("Maps_NRET",i.responseEnd)))))},t.prototype._logMemory=function(n){if(typeof performance!="undefined"){var i=performance.memory;i&&i.usedJSHeapSize&&t.record(n,Math.round(i.usedJSHeapSize/1e3))}},t.prototype._setControlStartTime=function(){var u,r,i,f;if(!n.isMapsVertical&&typeof performance!="undefined"&&performance.getEntriesByType)for(u=performance.getEntriesByType("resource"),r=0;r<u.length;r++)if(i=u[r],f=i.name?i.name:"",f.indexOf("/maps/mapcontrol/v9?")>-1){i.fetchStart>0&&t.setStartTime("CtrlLoadStart",!1,i.fetchStart);break}},t.prototype._logDwellTimeMarker=function(){for(var r,u=this,i=performance.now(),f=function(n){var r=function(){t.record("".concat("Maps_Dwell","_").concat(n),1);t.tryFlush()};n>i?u._dwellTimeMarkerIds.push(a.setTimeout(r,n-i)):r()},n=1;n<=3;n++)r=1e4*n,f(r)},t.prototype._tryLogPLTex=function(i){var h,c,r,u,f,v,e,l,y,s,a,o;if(i===void 0&&(i=!1),(!this._logStatus.Maps_PLTEX||!n.isMapsVertical)&&!this._isPLTexLogged){for(h=!1,c=Object.keys(t._logStartKey),r=0;r<c.length;r++)t._logStartKey[c[r]].includeinPLTex&&(h=!0);if(u=!1,h||i)i&&(u=!0);else{for(u=!0,t.mark("Maps_PLTEX"),t.mark("Maps_PLTEX_V9"),t.record("Maps_MovePLTex",this._totalMapMoves),t.record("Maps_resizePLTex",this._totalMapResizeEvents),f=0,v=performance.getEntriesByType("navigation"),e=0,l=v;e<l.length;e++)o=l[e],f+=o.transferSize;for(y=performance.getEntriesByType("resource"),s=0,a=y;s<a.length;s++)o=a[s],f+=o.transferSize;t.record("Maps_tts",Math.round(f/1024))}u&&(this._isPLTexLogged=!0,this._logStatus.Maps_PLTEX=!0,this._map.pltEX.resolve())}},t.prototype._tryLogLandingLOD=function(){var n=this._map.getCamera().zoom+1;t.record("Maps_LLOD",Math.round(n))},t._startWatchForActiveKeys=function(){t._keyExpiredTimerId===-1&&(t._keyExpiredTimerId=a.setTimeout(function(){var u,i,f,n,r;for(t._keyExpiredTimerId=-1,u=Date.now(),i=Object.keys(t._logStartKey),n=0;n<i.length;n++)u-t._logStartKey[i[n]].startTime>t._timeoutForPerfLogging&&(delete t._logStartKey[i[n]],f=!0);r=t._instance;f&&r&&r._tryLogPLTex(!0);Object.keys(t._logStartKey).length>0&&t._startWatchForActiveKeys()},1e4))},t._timeoutForPerfLogging=2e4,t.rmsUrlIdentifier=/bing.com\/(\w|\/|,|\.)+\.(css|js)/ig,t._logStartKey={},t._perfInclusions=n.perfSDKInclusions||[],t._keyExpiredTimerId=-1,t._PASLoggingKeys=["Maps_BST","Maps_PPLT","Maps_PLT","Maps_PLT_V9","Maps_PLTEX","Maps_CLT","Maps_READY"],t._pasPageTimingsLog=window._pageTimings||(window._pageTimings={}),t._mapPausedDuration=0,t._mapPausedStart=-1,t}(),d;(function(t){function e(){i.logger.igUpdatedPromise.then(function(){if(r.length>0||u.length>0){var t=Date.now(),e="id:".concat(Math.round(Math.random()*1e4),",")+(r.length>0?'P:"'.concat(r.join(","),'",'):"")+(u.length>0?'S:"'.concat(u.join(","),'",'):"")+'v:1.1,T:"CI.Perf",FID:"CI",Name:"PerfV2"',i=n.dynamicProperties,s=i.impressionGuid,h=i.origin+"/fd/ls/lsp.aspx",c="<E><T>Event.ClientInst<\/T><IG>".concat(s,"<\/IG><TS>").concat(t,"<\/TS><D><![CDATA[{").concat(e,"}]\]><\/D><\/E>"),l="<ClientInstRequest><Events>".concat(c,"<\/Events><STS>").concat(t,"<\/STS><\/ClientInstRequest>");navigator.sendBeacon(h,l);r=[];u=[];o=!0;clearTimeout(f);f=-1}})}function h(){o&&f===-1&&(f=a.setTimeout(e,c))}function l(n,t){u.push(n+":"+(typeof t=="number"?Math.round(t):t));h()}function v(n,t){t||(t=performance.now()-nt.getStartTime("CtrlLoadStart"));r.push(n+":"+Math.round(t).toString(36));h()}function y(){e();clearTimeout(f)}function p(){return s}function w(n){s=n}var c=1e3,r=[],u=[],f=-1,o=!1,s;t.tryFlush=e;t.record=l;t.mark=v;t.dispose=y;t.getLastMoveStat=p;t.setLastMoveStat=w})(d||(d={}));atlas.Map=pt;i.Anchor=nr;i.GeoJSON=lt;i.NetworkCallbacks=y.callbacks;i.Point=l;i.Rectangle=ei;i.ResourceManager=tr;i.Size=vt;i.BingLogoControl=vi;i.LocateMeControl=kt;i.PerfV2SDKLogger=d;i.StylePicker=ii;i.BingCompassControl=gt;i.BingPitchControl=ni;i.BingZoomControl=ti;i.MapControlInstrumentationHelper=v;o.AtlasHelper=u;o.AzureMapEvents=f;o.CommandQueue=di;o.Geocoder=rr;o.GeochainManager=oi;o.GeolocationProvider=si;o.JSEvent=w;o.LruCache=fi;o.MapDelegate=ri;o.MapsInfobox=bt;o.MapMath=rt;o.Network=y;o.ObjectWithId=ht;o.PoiAnimation=ct;o.PerfV2Logger=nt;o.ReverseGeocoder=hi;o._Url=gi}catch(ci){if(i&&i.logger)i.logger.logCriticalError(ci);else throw ci;}}.call(window)